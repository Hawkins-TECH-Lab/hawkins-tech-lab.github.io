<!DOCTYPE html>
<html lang="en"><head>
<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.5.1/jquery.min.js" integrity="sha512-bLT0Qm9VnAYZDflyKcBaQ2gg0hSYNQrJ8RilYldYQ1FxQYoCLtUjuuRuZo+fjqhx/qtq/1itJ0C2ejDxltZVFg==" crossorigin="anonymous"></script><script src="../../../site_libs/clipboard/clipboard.min.js"></script>
<script src="../../../site_libs/quarto-html/tabby.min.js"></script>
<script src="../../../site_libs/quarto-html/popper.min.js"></script>
<script src="../../../site_libs/quarto-html/tippy.umd.min.js"></script>
<link href="../../../site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="../../../site_libs/quarto-html/light-border.css" rel="stylesheet">
<link href="../../../site_libs/quarto-html/quarto-html.min.css" rel="stylesheet" data-mode="light">
<link href="../../../site_libs/quarto-html/quarto-syntax-highlighting.css" rel="stylesheet" id="quarto-text-highlighting-styles"><meta charset="utf-8">
  <meta name="generator" content="quarto-1.5.56">

  <title>Hawkinslab – Lecture 8 - Advanced Choice Models</title>
  <meta name="apple-mobile-web-app-capable" content="yes">
  <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, minimal-ui">
  <link rel="stylesheet" href="../../../site_libs/revealjs/dist/reset.css">
  <link rel="stylesheet" href="../../../site_libs/revealjs/dist/reveal.css">
  <style>
    code{white-space: pre-wrap;}
    span.smallcaps{font-variant: small-caps;}
    div.columns{display: flex; gap: min(4vw, 1.5em);}
    div.column{flex: auto; overflow-x: auto;}
    div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
    ul.task-list{list-style: none;}
    ul.task-list li input[type="checkbox"] {
      width: 0.8em;
      margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
      vertical-align: middle;
    }
    /* CSS for syntax highlighting */
    pre > code.sourceCode { white-space: pre; position: relative; }
    pre > code.sourceCode > span { line-height: 1.25; }
    pre > code.sourceCode > span:empty { height: 1.2em; }
    .sourceCode { overflow: visible; }
    code.sourceCode > span { color: inherit; text-decoration: inherit; }
    div.sourceCode { margin: 1em 0; }
    pre.sourceCode { margin: 0; }
    @media screen {
    div.sourceCode { overflow: auto; }
    }
    @media print {
    pre > code.sourceCode { white-space: pre-wrap; }
    pre > code.sourceCode > span { display: inline-block; text-indent: -5em; padding-left: 5em; }
    }
    pre.numberSource code
      { counter-reset: source-line 0; }
    pre.numberSource code > span
      { position: relative; left: -4em; counter-increment: source-line; }
    pre.numberSource code > span > a:first-child::before
      { content: counter(source-line);
        position: relative; left: -1em; text-align: right; vertical-align: baseline;
        border: none; display: inline-block;
        -webkit-touch-callout: none; -webkit-user-select: none;
        -khtml-user-select: none; -moz-user-select: none;
        -ms-user-select: none; user-select: none;
        padding: 0 4px; width: 4em;
        color: #aaaaaa;
      }
    pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
    div.sourceCode
      { color: #003b4f; background-color: #f1f3f5; }
    @media screen {
    pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
    }
    code span { color: #003b4f; } /* Normal */
    code span.al { color: #ad0000; } /* Alert */
    code span.an { color: #5e5e5e; } /* Annotation */
    code span.at { color: #657422; } /* Attribute */
    code span.bn { color: #ad0000; } /* BaseN */
    code span.bu { } /* BuiltIn */
    code span.cf { color: #003b4f; font-weight: bold; } /* ControlFlow */
    code span.ch { color: #20794d; } /* Char */
    code span.cn { color: #8f5902; } /* Constant */
    code span.co { color: #5e5e5e; } /* Comment */
    code span.cv { color: #5e5e5e; font-style: italic; } /* CommentVar */
    code span.do { color: #5e5e5e; font-style: italic; } /* Documentation */
    code span.dt { color: #ad0000; } /* DataType */
    code span.dv { color: #ad0000; } /* DecVal */
    code span.er { color: #ad0000; } /* Error */
    code span.ex { } /* Extension */
    code span.fl { color: #ad0000; } /* Float */
    code span.fu { color: #4758ab; } /* Function */
    code span.im { color: #00769e; } /* Import */
    code span.in { color: #5e5e5e; } /* Information */
    code span.kw { color: #003b4f; font-weight: bold; } /* Keyword */
    code span.op { color: #5e5e5e; } /* Operator */
    code span.ot { color: #003b4f; } /* Other */
    code span.pp { color: #ad0000; } /* Preprocessor */
    code span.sc { color: #5e5e5e; } /* SpecialChar */
    code span.ss { color: #20794d; } /* SpecialString */
    code span.st { color: #20794d; } /* String */
    code span.va { color: #111111; } /* Variable */
    code span.vs { color: #20794d; } /* VerbatimString */
    code span.wa { color: #5e5e5e; font-style: italic; } /* Warning */
  </style>
  <link rel="stylesheet" href="../../../site_libs/revealjs/dist/theme/quarto.css">
  <link href="../../../site_libs/revealjs/plugin/quarto-line-highlight/line-highlight.css" rel="stylesheet">
  <link href="../../../site_libs/revealjs/plugin/reveal-menu/menu.css" rel="stylesheet">
  <link href="../../../site_libs/revealjs/plugin/reveal-menu/quarto-menu.css" rel="stylesheet">
  <link href="../../../site_libs/revealjs/plugin/reveal-chalkboard/font-awesome/css/all.css" rel="stylesheet">
  <link href="../../../site_libs/revealjs/plugin/reveal-chalkboard/style.css" rel="stylesheet">
  <link href="../../../site_libs/revealjs/plugin/quarto-support/footer.css" rel="stylesheet">
  <style type="text/css">

  .callout {
    margin-top: 1em;
    margin-bottom: 1em;  
    border-radius: .25rem;
  }

  .callout.callout-style-simple { 
    padding: 0em 0.5em;
    border-left: solid #acacac .3rem;
    border-right: solid 1px silver;
    border-top: solid 1px silver;
    border-bottom: solid 1px silver;
    display: flex;
  }

  .callout.callout-style-default {
    border-left: solid #acacac .3rem;
    border-right: solid 1px silver;
    border-top: solid 1px silver;
    border-bottom: solid 1px silver;
  }

  .callout .callout-body-container {
    flex-grow: 1;
  }

  .callout.callout-style-simple .callout-body {
    font-size: 1rem;
    font-weight: 400;
  }

  .callout.callout-style-default .callout-body {
    font-size: 0.9rem;
    font-weight: 400;
  }

  .callout.callout-titled.callout-style-simple .callout-body {
    margin-top: 0.2em;
  }

  .callout:not(.callout-titled) .callout-body {
      display: flex;
  }

  .callout:not(.no-icon).callout-titled.callout-style-simple .callout-content {
    padding-left: 1.6em;
  }

  .callout.callout-titled .callout-header {
    padding-top: 0.2em;
    margin-bottom: -0.2em;
  }

  .callout.callout-titled .callout-title  p {
    margin-top: 0.5em;
    margin-bottom: 0.5em;
  }
    
  .callout.callout-titled.callout-style-simple .callout-content  p {
    margin-top: 0;
  }

  .callout.callout-titled.callout-style-default .callout-content  p {
    margin-top: 0.7em;
  }

  .callout.callout-style-simple div.callout-title {
    border-bottom: none;
    font-size: .9rem;
    font-weight: 600;
    opacity: 75%;
  }

  .callout.callout-style-default  div.callout-title {
    border-bottom: none;
    font-weight: 600;
    opacity: 85%;
    font-size: 0.9rem;
    padding-left: 0.5em;
    padding-right: 0.5em;
  }

  .callout.callout-style-default div.callout-content {
    padding-left: 0.5em;
    padding-right: 0.5em;
  }

  .callout.callout-style-simple .callout-icon::before {
    height: 1rem;
    width: 1rem;
    display: inline-block;
    content: "";
    background-repeat: no-repeat;
    background-size: 1rem 1rem;
  }

  .callout.callout-style-default .callout-icon::before {
    height: 0.9rem;
    width: 0.9rem;
    display: inline-block;
    content: "";
    background-repeat: no-repeat;
    background-size: 0.9rem 0.9rem;
  }

  .callout-title {
    display: flex
  }
    
  .callout-icon::before {
    margin-top: 1rem;
    padding-right: .5rem;
  }

  .callout.no-icon::before {
    display: none !important;
  }

  .callout.callout-titled .callout-body > .callout-content > :last-child {
    padding-bottom: 0.5rem;
    margin-bottom: 0;
  }

  .callout.callout-titled .callout-icon::before {
    margin-top: .5rem;
    padding-right: .5rem;
  }

  .callout:not(.callout-titled) .callout-icon::before {
    margin-top: 1rem;
    padding-right: .5rem;
  }

  /* Callout Types */

  div.callout-note {
    border-left-color: #4582ec !important;
  }

  div.callout-note .callout-icon::before {
    background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAAAAXNSR0IArs4c6QAAAERlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAA6ABAAMAAAABAAEAAKACAAQAAAABAAAAIKADAAQAAAABAAAAIAAAAACshmLzAAAEU0lEQVRYCcVXTWhcVRQ+586kSUMMxkyaElstCto2SIhitS5Ek8xUKV2poatCcVHtUlFQk8mbaaziwpWgglJwVaquitBOfhQXFlqlzSJpFSpIYyXNjBNiTCck7x2/8/LeNDOZxDuEkgOXe++553zfefee+/OYLOXFk3+1LLrRdiO81yNqZ6K9cG0P3MeFaMIQjXssE8Z1JzLO9ls20MBZX7oG8w9GxB0goaPrW5aNMp1yOZIa7Wv6o2ykpLtmAPs/vrG14Z+6d4jpbSKuhdcSyq9wGMPXjonwmESXrriLzFGOdDBLB8Y6MNYBu0dRokSygMA/mrun8MGFN3behm6VVAwg4WR3i6FvYK1T7MHo9BK7ydH+1uurECoouk5MPRyVSBrBHMYwVobG2aOXM07sWrn5qgB60rc6mcwIDJtQrnrEr44kmy+UO9r0u9O5/YbkS9juQckLed3DyW2XV/qWBBB3ptvI8EUY3I9p/67OW+g967TNr3Sotn3IuVlfMLVnsBwH4fsnebJvyGm5GeIUA3jljERmrv49SizPYuq+z7c2H/jlGC+Ghhupn/hcapqmcudB9jwJ/3jvnvu6vu5lVzF1fXyZuZZ7U8nRmVzytvT+H3kilYvH09mLWrQdwFSsFEsxFVs5fK7A0g8gMZjbif4ACpKbjv7gNGaD8bUrlk8x+KRflttr22JEMRUbTUwwDQScyzPgedQHZT0xnx7ujw2jfVfExwYHwOsDTjLdJ2ebmeQIlJ7neo41s/DrsL3kl+W2lWvAga0tR3zueGr6GL78M3ifH0rGXrBC2aAR8uYcIA5gwV8zIE8onoh8u0Fca/ciF7j1uOzEnqcIm59sEXoGc0+z6+H45V1CvAvHcD7THztu669cnp+L0okAeIc6zjbM/24LgGM1gZk7jnRu1aQWoU9sfUOuhrmtaPIO3YY1KLLWZaEO5TKUbMY5zx8W9UJ6elpLwKXbsaZ4EFl7B4bMtDv0iRipKoDQT2sNQI9b1utXFdYisi+wzZ/ri/1m7QfDgEuvgUUEIJPq3DhX/5DWNqIXDOweC2wvIR90Oq3lDpdMIgD2r0dXvGdsEW5H6x6HLRJYU7C69VefO1x8Gde1ZFSJLfWS1jbCnhtOPxmpfv2LXOA2Xk2tvnwKKPFuZ/oRmwBwqRQDcKNeVQkYcOjtWVBuM/JuYw5b6isojIkYxyYAFn5K7ZBF10fea52y8QltAg6jnMqNHFBmGkQ1j+U43HMi2xMar1Nv0zGsf1s8nUsmUtPOOrbFIR8bHFDMB5zL13Gmr/kGlCkUzedTzzmzsaJXhYawnA3UmARpiYj5ooJZiUoxFRtK3X6pgNPv+IZVPcnwbOl6f+aBaO1CNvPW9n9LmCp01nuSaTRF2YxHqZ8DYQT6WsXT+RD6eUztwYLZ8rM+rcPxamv1VQzFUkzFXvkiVrySGQgJNvXHJAxiU3/NwiC03rSf05VBaPtu/Z7/B8Yn/w7eguloAAAAAElFTkSuQmCC');
  }

  div.callout-note.callout-style-default .callout-title {
    background-color: #dae6fb
  }

  div.callout-important {
    border-left-color: #d9534f !important;
  }

  div.callout-important .callout-icon::before {
    background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAAAAXNSR0IArs4c6QAAAERlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAA6ABAAMAAAABAAEAAKACAAQAAAABAAAAIKADAAQAAAABAAAAIAAAAACshmLzAAAEKklEQVRYCcVXTWhcVRS+575MJym48A+hSRFr00ySRQhURRfd2HYjk2SSTokuBCkU2o0LoSKKraKIBTcuFCoidGFD08nkBzdREbpQ1EDNIv8qSGMFUboImMSZd4/f9zJv8ibJMC8xJQfO3HPPPef7zrvvvnvviIkpC9nsw0UttFunbUhpFzFtarSd6WJkStVMw5xyVqYTvkwfzuf/5FgtkVoB0729j1rjXwThS7Vio+Mo6DNnvLfahoZ+i/o32lULuJ3NNiz7q6+pyAUkJaFF6JwaM2lUJlV0MlnQn5aTRbEu0SEqHUa0A4AdiGuB1kFXRfVyg5d87+Dg4DL6m2TLAub60ilj7A1Ec4odSAc8X95sHh7+ZRPCFo6Fnp7HfU/fBng/hi10CjCnWnJjsxvDNxWw0NfV6Rv5GgP3I3jGWXumdTD/3cbEOP2ZbOZp69yniG3FQ9z1jD7bnBu9Fc2tKGC2q+uAJOQHBDRiZX1x36o7fWBs7J9ownbtO+n0/qWkvW7UPIfc37WgT6ZGR++EOJyeQDSb9UB+DZ1G6DdLDzyS+b/kBCYGsYgJbSQHuThGKRcw5xdeQf8YdNHsc6ePXrlSYMBuSIAFTGAtQo+VuALo4BX83N190NWZWbynBjhOHsmNfFWLeL6v+ynsA58zDvvAC8j5PkbOcXCMg2PZFk3q8MjI7WAG/Dp9AwP7jdGBOOQkAvlFUB+irtm16I1Zw9YBcpGTGXYmk3kQIC/Cds55l+iMI3jqhjAuaoe+am2Jw5GT3Nbz3CkE12NavmzN5+erJW7046n/CH1RO/RVa8lBLozXk9uqykkGAyRXLWlLv5jyp4RFsG5vGVzpDLnIjTWgnRy2Rr+tDKvRc7Y8AyZq10jj8DqXdnIRNtFZb+t/ZRtXcDiVnzpqx8mPcDWxgARUqx0W1QB9MeUZiNrV4qP+Ehc+BpNgATsTX8ozYKL2NtFYAHc84fG7ndxUPr+AR/iQSns7uSUufAymwDOb2+NjK27lEFocm/EE2WpyIy/Hi66MWuMKJn8RvxIcj87IM5Vh9663ziW36kR0HNenXuxmfaD8JC7tfKbrhFr7LiZCrMjrzTeGx+PmkosrkNzW94ObzwocJ7A1HokLolY+AvkTiD/q1H0cN48c5EL8Crkttsa/AXQVDmutfyku0E7jShx49XqV3MFK8IryDhYVbj7Sj2P2eBxwcXoe8T8idsKKPRcnZw1b+slFTubwUwhktrfnAt7J++jwQtLZcm3sr9LQrjRzz6cfMv9aLvgmnAGvpoaGLxM4mAEaLV7iAzQ3oU0IvD5x9ix3yF2RAAuYAOO2f7PEFWCXZ4C9Pb2UsgDeVnFSpbFK7/IWu7TPTvBqzbGdCHOJQSxiEjt6IyZmxQyEJHv6xyQsYk//moVFsN2zP6fRImjfq7/n/wFDguUQFNEwugAAAABJRU5ErkJggg==');
  }

  div.callout-important.callout-style-default .callout-title {
    background-color: #f7dddc
  }

  div.callout-warning {
    border-left-color: #f0ad4e !important;
  }

  div.callout-warning .callout-icon::before {
    background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAAAAXNSR0IArs4c6QAAAERlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAA6ABAAMAAAABAAEAAKACAAQAAAABAAAAIKADAAQAAAABAAAAIAAAAACshmLzAAAETklEQVRYCeVWW2gcVRg+58yaTUnizqbipZeX4uWhBEniBaoUX1Ioze52t7sRq6APio9V9MEaoWlVsFasRq0gltaAPuxms8lu0gcviE/FFOstVbSIxgcv6SU7EZqmdc7v9+9mJtNks51NTUH84ed889/PP+cmxP+d5FIbMJmNbpREu4WUkiTtCicKny0l1pIKmBzovF2S+hIJHX8iEu3hZJ5lNZGqyRrGSIQpq15AzF28jgpeY6yk6GVdrfFqdrD6Iw+QlB8g0YS2g7dyQmXM/IDhBhT0UCiRf59lfqmmDvzRt6kByV/m4JjtzuaujMUM2c5Z2d6JdKrRb3K2q6mA+oYVz8JnDdKPmmNthzkAk/lN63sYPgevrguc72aZX/L9C6x09GYyxBgCX4NlvyGUHOKELlm5rXeR1kchuChJt4SSwyddZRXgvwMGvYo4QSlk3/zkHD8UHxwVJA6zjZZqP8v8kK8OWLnIZtLyCAJagYC4rTGW/9Pqj92N/c+LUaAj27movwbi19tk/whRCIE7Q9vyI6yvRpftAKVTdUjOW40X3h5OXsKCdmFcx0xlLJoSuQngnrJe7Kcjm4OMq9FlC7CMmScQANuNvjfP3PjGXDBaUQmbp296S5L4DrpbrHN1T87ZVEZVCzg1FF0Ft+dKrlLukI+/c9ENo+TvlTDbYFvuKPtQ9+l052rXrgKoWkDAFnvh0wTOmYn8R5f4k/jN/fZiCM1tQx9jQQ4ANhqG4hiL0qIFTGViG9DKB7GYzgubnpofgYRwO+DFjh0Zin2m4b/97EDkXkc+f6xYAPX0KK2I/7fUQuwzuwo/L3AkcjugPNixC8cHf0FyPjWlItmLxWw4Ou9YsQCr5fijMGoD/zpdRy95HRysyXA74MWOnscpO4j2y3HAVisw85hX5+AFBRSHt4ShfLFkIMXTqyKFc46xdzQM6XbAi702a7sy04J0+feReMFKp5q9esYLCqAZYw/k14E/xcLLsFElaornTuJB0svMuJINy8xkIYuL+xPAlWRceH6+HX7THJ0djLUom46zREu7tTkxwmf/FdOZ/sh6Q8qvEAiHpm4PJ4a/doJe0gH1t+aHRgCzOvBvJedEK5OFE5jpm4AGP2a8Dxe3gGJ/pAutug9Gp6he92CsSsWBaEcxGx0FHytmIpuqGkOpldqNYQK8cSoXvd+xLxXADw0kf6UkJNFtdo5MOgaLjiQOQHcn+A6h5NuL2s0qsC2LOM75PcF3yr5STuBSAcGG+meA14K/CI21HcS4LBT6tv0QAh8Dr5l93AhZzG5ZJ4VxAqdZUEl9z7WJ4aN+svMvwHHL21UKTd1mqvChH7/Za5xzXBBKrUcB0TQ+Ulgkfbi/H/YT5EptrGzsEK7tR1B7ln9BBwckYfMiuSqklSznIuoIIOM42MQO+QnduCoFCI0bpkzjCjddHPN/F+2Yu+sd9bKNpVwHhbS3LluK/0zgfwD0xYI5dXuzlQAAAABJRU5ErkJggg==');
  }

  div.callout-warning.callout-style-default .callout-title {
    background-color: #fcefdc
  }

  div.callout-tip {
    border-left-color: #02b875 !important;
  }

  div.callout-tip .callout-icon::before {
    background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAAAAXNSR0IArs4c6QAAAERlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAA6ABAAMAAAABAAEAAKACAAQAAAABAAAAIKADAAQAAAABAAAAIAAAAACshmLzAAADr0lEQVRYCe1XTWgTQRj9ZjZV8a9SPIkKgj8I1bMHsUWrqYLVg4Ue6v9BwZOxSYsIerFao7UiUryIqJcqgtpimhbBXoSCVxUFe9CTiogUrUp2Pt+3aUI2u5vdNh4dmMzOzHvvezuz8xNFM0mjnbXaNu1MvFWRXkXEyE6aYOYJpdW4IXuA4r0fo8qqSMDBU0v1HJUgVieAXxzCsdE/YJTdFcVIZQNMyhruOMJKXYFoLfIfIvVIMWdsrd+Rpd86ZmyzzjJmLStqRn0v8lzkb4rVIXvnpScOJuAn2ACC65FkPzEdEy4TPWRLJ2h7z4cArXzzaOdKlbOvKKX25Wl00jSnrwVxAg3o4dRxhO13RBSdNvH0xSARv3adTXbBdTf64IWO2vH0LT+cv4GR1DJt+DUItaQogeBX/chhbTBxEiZ6gftlDNXTrvT7co4ub5A6gp9HIcHvzTa46OS5fBeP87Qm0fQkr4FsYgVQ7Qg+ZayaDg9jhg1GkWj8RG6lkeSacrrHgDaxdoBiZPg+NXV/KifMuB6//JmYH4CntVEHy/keA6x4h4CU5oFy8GzrBS18cLJMXcljAKB6INjWsRcuZBWVaS3GDrqB7rdapVIeA+isQ57Eev9eCqzqOa81CY05VLd6SamW2wA2H3SiTbnbSxmzfp7WtKZkqy4mdyAlGx7ennghYf8voqp9cLSgKdqNfa6RdRsAAkPwRuJZNbpByn+RrJi1RXTwdi8RQF6ymDwGMAtZ6TVE+4uoKh+MYkcLsT0Hk8eAienbiGdjJHZTpmNjlbFJNKDVAp2fJlYju6IreQxQ08UJDNYdoLSl6AadO+fFuCQqVMB1NJwPm69T04Wv5WhfcWyfXQB+wXRs1pt+nCknRa0LVzSA/2B+a9+zQJadb7IyyV24YAxKp2Jqs3emZTuNnKxsah+uabKbMk7CbTgJx/zIgQYErIeTKRQ9yD9wxVof5YolPHqaWo7TD6tJlh7jQnK5z2n3+fGdggIOx2kaa2YI9QWarc5Ce1ipNWMKeSG4DysFF52KBmTNMmn5HqCFkwy34rDg05gDwgH3bBi+sgFhN/e8QvRn8kbamCOhgrZ9GJhFDgfcMHzFb6BAtjKpFhzTjwv1KCVuxHvCbsSiEz4CANnj84cwHdFXAbAOJ4LTSAawGWFn5tDhLMYz6nWeU2wJfIhmIJBefcd/A5FWQWGgrWzyORZ3Q6HuV+Jf0Bj+BTX69fm1zWgK7By1YTXchFDORywnfQ7GpzOo6S+qECrsx2ifVQAAAABJRU5ErkJggg==');
  }

  div.callout-tip.callout-style-default .callout-title {
    background-color: #ccf1e3
  }

  div.callout-caution {
    border-left-color: #fd7e14 !important;
  }

  div.callout-caution .callout-icon::before {
    background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAAAAXNSR0IArs4c6QAAAERlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAA6ABAAMAAAABAAEAAKACAAQAAAABAAAAIKADAAQAAAABAAAAIAAAAACshmLzAAACV0lEQVRYCdVWzWoUQRCuqp2ICBLJXgITZL1EfQDBW/bkzUMUD7klD+ATSHBEfAIfQO+iXsWDxJsHL96EHAwhgzlkg8nBg25XWb0zIb0zs9muYYWkoKeru+vn664fBqElyZNuyh167NXJ8Ut8McjbmEraKHkd7uAnAFku+VWdb3reSmRV8PKSLfZ0Gjn3a6Xlcq9YGb6tADjn+lUfTXtVmaZ1KwBIvFI11rRXlWlatwIAAv2asaa9mlB9wwygiDX26qaw1yYPzFXg2N1GgG0FMF8Oj+VIx7E/03lHx8UhvYyNZLN7BwSPgekXXLribw7w5/c8EF+DBK5idvDVYtEEwMeYefjjLAdEyQ3M9nfOkgnPTEkYU+sxMq0BxNR6jExrAI31H1rzvLEfRIdgcv1XEdj6QTQAS2wtstEALLG1yEZ3QhH6oDX7ExBSFEkFINXH98NTrme5IOaaA7kIfiu2L8A3qhH9zRbukdCqdsA98TdElyeMe5BI8Rs2xHRIsoTSSVFfCFCWGPn9XHb4cdobRIWABNf0add9jakDjQJpJ1bTXOJXnnRXHRf+dNL1ZV1MBRCXhMbaHqGI1JkKIL7+i8uffuP6wVQAzO7+qVEbF6NbS0LJureYcWXUUhH66nLR5rYmva+2tjRFtojkM2aD76HEGAD3tPtKM309FJg5j/K682ywcWJ3PASCcycH/22u+Bh7Aa0ehM2Fu4z0SAE81HF9RkB21c5bEn4Dzw+/qNOyXr3DCTQDMBOdhi4nAgiFDGCinIa2owCEChUwD8qzd03PG+qdW/4fDzjUMcE1ZpIAAAAASUVORK5CYII=');
  }

  div.callout-caution.callout-style-default .callout-title {
    background-color: #ffe5d0
  }

  </style>
  <style type="text/css">
    .reveal div.sourceCode {
      margin: 0;
      overflow: auto;
    }
    .reveal div.hanging-indent {
      margin-left: 1em;
      text-indent: -1em;
    }
    .reveal .slide:not(.center) {
      height: 100%;
    }
    .reveal .slide.scrollable {
      overflow-y: auto;
    }
    .reveal .footnotes {
      height: 100%;
      overflow-y: auto;
    }
    .reveal .slide .absolute {
      position: absolute;
      display: block;
    }
    .reveal .footnotes ol {
      counter-reset: ol;
      list-style-type: none; 
      margin-left: 0;
    }
    .reveal .footnotes ol li:before {
      counter-increment: ol;
      content: counter(ol) ". "; 
    }
    .reveal .footnotes ol li > p:first-child {
      display: inline-block;
    }
    .reveal .slide ul,
    .reveal .slide ol {
      margin-bottom: 0.5em;
    }
    .reveal .slide ul li,
    .reveal .slide ol li {
      margin-top: 0.4em;
      margin-bottom: 0.2em;
    }
    .reveal .slide ul[role="tablist"] li {
      margin-bottom: 0;
    }
    .reveal .slide ul li > *:first-child,
    .reveal .slide ol li > *:first-child {
      margin-block-start: 0;
    }
    .reveal .slide ul li > *:last-child,
    .reveal .slide ol li > *:last-child {
      margin-block-end: 0;
    }
    .reveal .slide .columns:nth-child(3) {
      margin-block-start: 0.8em;
    }
    .reveal blockquote {
      box-shadow: none;
    }
    .reveal .tippy-content>* {
      margin-top: 0.2em;
      margin-bottom: 0.7em;
    }
    .reveal .tippy-content>*:last-child {
      margin-bottom: 0.2em;
    }
    .reveal .slide > img.stretch.quarto-figure-center,
    .reveal .slide > img.r-stretch.quarto-figure-center {
      display: block;
      margin-left: auto;
      margin-right: auto; 
    }
    .reveal .slide > img.stretch.quarto-figure-left,
    .reveal .slide > img.r-stretch.quarto-figure-left  {
      display: block;
      margin-left: 0;
      margin-right: auto; 
    }
    .reveal .slide > img.stretch.quarto-figure-right,
    .reveal .slide > img.r-stretch.quarto-figure-right  {
      display: block;
      margin-left: auto;
      margin-right: 0; 
    }
  </style>
  <script src="../../../site_libs/quarto-diagram/mermaid.min.js"></script>
  <script src="../../../site_libs/quarto-diagram/mermaid-init.js"></script>
  <link href="../../../site_libs/quarto-diagram/mermaid.css" rel="stylesheet">
  <script src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.6/require.min.js" integrity="sha512-c3Nl8+7g4LMSTdrm621y7kf9v3SDPnhxLNhcjFJbKECVnmZHTdo+IRO05sNLTH/D3vA6u1X32ehoLC7WFVdheg==" crossorigin="anonymous"></script>

  

  <script type="application/javascript">define('jquery', [],function() {return window.jQuery;})</script>

</head>
<body class="quarto-light">
  <div class="reveal">
    <div class="slides">

<section id="title-slide" class="quarto-title-block center">
  <h1 class="title">Lecture 8 - Advanced Choice Models</h1>
  <p class="subtitle">ENCI707: Engineering Demand and Policy Analysis</p>

<div class="quarto-title-authors">
</div>

</section>
<section id="outline" class="slide level2">
<h2>Outline</h2>
<div>
<ol type="1">
<li class="fragment">Basis for choice modeling</li>
<li class="fragment">Theory</li>
<li class="fragment">Logit choice model</li>
</ol>
</div>
</section>
<section id="basis-for-choice-modeling" class="slide level2 smaller">
<h2>Basis for Choice Modeling</h2>
<ul>
<li>Aggregate demand models (such as those we have been discussing) based on observations for <strong>groups of travelers</strong> or <strong>average relations</strong> for zones</li>
<li><strong>Discrete choice:</strong> probability an individual chooses a given option a function of their socioeconomic characteristics &amp; relative attractiveness of the option</li>
<li>Cannot estimate via least squares because probability is unobserved – only observe choice</li>
<li>Models are <strong>probabilistic</strong> &amp; do not give an outcome value such as <strong>trips</strong> – must use probability concepts to generate discrete outcomes (summation over all observations to give expected number choosing option or use sample enumeration to allocate discrete outcomes)</li>
</ul>
</section>
<section id="basis-for-choice-modeling-1" class="slide level2 smaller">
<h2>Basis for Choice Modeling</h2>
<ul>
<li>Individuals derive <strong>utility</strong> from the use of alternatives defined by a <strong>utility function</strong> often denoted by V <span class="math display">\[Vpeanut butter = 0.25 – 1.0 ALLERGY - 0.5 PRICE + 0.25 ORGANIC\]</span></li>
<li>Need probability value between 0 &amp; 1. Various forms, generally with an s-shaped plot. Main ones are <span class="math display">\[𝐿𝑜𝑔𝑖𝑡:𝑃_1=exp⁡(𝑉_1 )/(exp⁡(𝑉1)+exp⁡(𝑉2))\]</span> <span class="math display">\[𝑃𝑟𝑜𝑏𝑖𝑡:𝑃_1=\int_{-\infty}^{\infty}⁡\int_{-\infty}^{V_1-V_2+x_1}\frac{⁡exp⁡(\frac{−1}{2(1−\rho^2)} (\frac{𝑥_1}{\sigma_1})^2−\frac{2\rho 𝑥_1 𝑥_2}{\sigma_1 \sigma_2}+(\frac{𝑥_2}{\sigma_2})^2}{2\pi\sigma_1 \sigma_2 \sqrt{1−\rho^2 }} 𝑑𝑥_2 𝑑𝑥_1\]</span></li>
</ul>
</section>
<section id="properties-of-discrete-choice-dc" class="slide level2">
<h2>Properties of Discrete Choice (DC)</h2>
<ul>
<li>Based on theories of <strong>individual behavior</strong> &amp; do not constitute physical analogies – therefore stable over time &amp; space</li>
<li>Can be more <strong>statistically efficient</strong> than aggregate models because each observation is an outcome rather than using aggregations of potentially hundreds of observations</li>
<li>DM less likely to suffer from bias due to correlation between aggregate units – i.e., <strong>ecological correlation</strong> (fallacy)</li>
</ul>
</section>
<section id="ecological-fallacy" class="slide level2">
<h2>Ecological Fallacy</h2>

<img data-src="../images/lecture5/eco_fallacy.png" class="quarto-figure quarto-figure-center r-stretch"></section>
<section id="theoretical-framework" class="slide level2 smaller">
<h2>Theoretical Framework</h2>
<ul>
<li>Individuals belong to a <strong>homogeneous population</strong> <span class="math inline">\(N\)</span>, act rationally, &amp; <strong>possess perfect information</strong> – i.e., they always select the option that maximizes their net personal utility subject to legal, social, physical, &amp;/or budgetary (both time &amp; money) constraints</li>
<li>There is a certain set <span class="math inline">\(𝐴 = \{𝐴_1, …𝐴_i,…𝐴_I\}\)</span> of available alternatives &amp; a set X of vectors of measured attributes of individuals &amp; their alternatives</li>
<li>An individual <span class="math inline">\(n\)</span> is endowed with a set of attributes <span class="math inline">\(𝑥 \in 𝑋\)</span> &amp; faces a choice set <span class="math inline">\(𝐴(n) \in 𝐴\)</span></li>
<li>We will assume choice set is predetermined for individuals</li>
</ul>
</section>
<section id="theoretical-framework-1" class="slide level2">
<h2>Theoretical Framework</h2>
<ul>
<li>Modeler, an observer, does not <strong>posses complete information</strong> about all elements considered by the individual making choice</li>
<li>Modeler assumes <span class="math inline">\(𝑈_{ni}\)</span> can be represented by two components:
<ul>
<li>A <strong>measurable</strong>, <strong>systematic</strong>, or <strong>representative</strong> part <span class="math inline">\(𝑉_{ni}\)</span>, which is a function of the measured attributes <span class="math inline">\(x\)</span></li>
<li>A random part <span class="math inline">\(\epsilon_{ni}\)</span>, which reflects <strong>indiosyncratic</strong> &amp; <strong>taste variation</strong>, together with measurement or observational errors made by the modeler</li>
</ul></li>
</ul>
</section>
<section id="theoretical-framework-2" class="slide level2">
<h2>Theoretical Framework</h2>
<ul>
<li>Modeler sets utility <span class="math inline">\(𝑈_{ni}=𝑉_{ni}+\epsilon_{ni}\)</span> to address two apparent irrationalities
<ol type="1">
<li>That two individuals faced with the <strong>same situation</strong> &amp; having the <strong>same personal attributes</strong> make different choices</li>
<li>That an individual may not select the alternative that <strong>appears</strong> to be the <em>best one</em></li>
</ol></li>
<li>Often assumed <span class="math inline">\(V_{ni}\)</span> given by <span class="math inline">\(\sum_k^K \beta_{ik} x_{nik}\)</span> here <span class="math inline">\(\beta_{ik}\)</span> are assumed <strong>constant</strong> for all individuals <span class="math inline">\(N\)</span> in the homogeneous set but <strong>may vary across alternatives</strong> <span class="math inline">\(I\)</span></li>
</ul>
</section>
<section id="theoretical-framework-3" class="slide level2 smaller">
<h2>Theoretical Framework</h2>
<ul>
<li>Individual chooses an alternative based on <span class="math inline">\(𝑈_{ni}≥ 𝑈_{jn} \forall A_j \in A(n)\)</span></li>
<li>Or: <span class="math inline">\(𝑉_{ni}  – 𝑉_{nj}≥\epsilon_{nj}  − \epsilon_{ni}\)</span> (notice swapping of <span class="math inline">\(i\)</span> &amp; <span class="math inline">\(j\)</span>)</li>
</ul>
<p>Not possible to know with certainty if the inequality holds, so use <span class="math display">\[𝑃_{ni}  = 𝑃(\epsilon_{nj} \leq \epsilon_{ni} + (V_{ni} - V_{nj})) \forall A_j \in A(n)\]</span> - Do not know distribution of joint residuals, so cannot derive analytical expression for model - Can denote <span class="math inline">\(f(\epsilon) = f(\epsilon_1, \epsilon_2, ... \epsilon_I\)</span> &amp; know they are <strong>random variables</strong> with a certain distribution</p>
</section>
<section id="theoretical-framework-4" class="slide level2 smaller">
<h2>Theoretical Framework</h2>
<ul>
<li>Can note that distribution for <span class="math inline">\(f(U)\)</span> is the same but with mean <span class="math inline">\(V\)</span> rather than 0 <span class="math display">\[P_{ni} = \int_{R_I} f(\epsilon) d\epsilon\]</span> <span class="math display">\[\text{where } R_I = \begin{cases}
\epsilon_{nj} \leq \epsilon_{ni} + (V_{ni} - V_{nj}), &amp; \forall A_j \in A(n) \\
V_{ni}) + \epsilon_{ni} \ge 0 \\
\end{cases}\]</span></li>
<li>Assuming independent &amp; identically distributed (<strong>IID</strong>) residuals, <span class="math display">\[f(\epsilon_1,...\epsilon_I) = \prod_i^I g(\epsilon_i)\]</span></li>
<li>And (drop <span class="math inline">\(n\)</span> for simplicity) <span class="math display">\[P_i = \int_{-\infty}^\infty g(\epsilon_i) d\epsilon_i \prod_{j \neq i} \int_{-\infty}^{V_i-V_j+\epsilon_i} g(\epsilon_j) d\epsilon_j\]</span></li>
</ul>
</section>
<section id="generating-the-logit-model" class="slide level2 smaller">
<h2>Generating the Logit Model</h2>
<ul>
<li>Assuming IID Gumbel (<strong>Extreme Value Type I</strong>) residuals, or equivalently that residual differences are <strong>logistically distributed</strong>, gives the standard multinomial logit specification</li>
<li>Termed <em>softmax function</em> in machine learning field <span class="math display">\[P_{ni} = \frac{exp(\mu V_{ni})}{\sum_{A_j \in A(n)} exp(\mu V_{nj})}\]</span></li>
<li>Where <span class="math inline">\(\mu\)</span> is a <strong>scale parameter</strong> assumed equal to 1.0 for identification</li>
</ul>
<p><img data-src="../images/lecture5/logit_curve.png" class="absolute" style="bottom: 0px; right: 0px; width: 35%; "></p>
</section>
<section id="logit-model-parameter-estimation" class="slide level2">
<h2>Logit Model Parameter Estimation</h2>
<ul>
<li>Commercial (&amp; opensource) software exists to estimate model parameters using the method of maximum likelihood estimation
<ul>
<li>Apollo (R &amp; free)</li>
<li>Biogeme (Python &amp; free)</li>
<li>STATA (commercial)</li>
<li>LIMDEP (commercial)</li>
<li>GAUSS (commercial)</li>
</ul></li>
<li>Parameter interpretation similar to regression (t-statistics, GoF, etc.)</li>
</ul>
</section>
<section id="direct-cross-elasticity" class="slide level2">
<h2>Direct &amp; Cross Elasticity</h2>
<ul>
<li><strong>Direct elasticity:</strong> direct effect of changing a variable value related to a good on demand for the same good
<ul>
<li>E.g., elasticity of transit demand wrt transit fare, transit travel time, or transit headway</li>
</ul></li>
<li><strong>Cross elasticity:</strong> effect of changing a variable value related to a good on demand for a different good
<ul>
<li>E.g., elasticity of transit demand wrt auto travel time</li>
</ul></li>
</ul>
</section>
<section id="logit---direct-elasticity" class="slide level2">
<h2>Logit - Direct Elasticity</h2>
<p>Direct elasticity of the probability of an individual <span class="math inline">\(n\)</span> choosing alternative <span class="math inline">\(i\)</span> wrt a change in an attribute/independent variable <span class="math inline">\(X_{ik}\)</span> with coefficient <span class="math inline">\(\beta_k\)</span> (ignoring <span class="math inline">\(n\)</span> subscripts for simplicity)</p>
<p><span class="math display">\[e_{direct} = \frac{\partial P_i}{\partial X_{ik}} \frac{X_{ik}}{P_i}=(1-P_i)X_{ik}\beta_k\]</span></p>
</section>
<section id="logit---cross-elasticity" class="slide level2 smaller">
<h2>Logit - Cross Elasticity</h2>
<ul>
<li>Cross elasticity of the probability of an individual <span class="math inline">\(n\)</span> choosing alternative <span class="math inline">\(i\)</span> wrt a change in an attribute/independent variable <span class="math inline">\(X_{jk}\)</span> with coefficient <span class="math inline">\(\beta_k\)</span> for a different alternative</li>
</ul>
<p><span class="math display">\[e_{cross} = -P_j X_{jk}\beta_k\]</span></p>
<ul>
<li>Above is same regardless of alternative <span class="math inline">\(i\)</span>. I.e., <strong>all alternatives</strong> have the same cross-elasticity wrt an attribute <span class="math inline">\(k\)</span> of alternative <span class="math inline">\(j\)</span></li>
<li>Above results from independence of irrelevant alternatives (<strong>IIA</strong>) property of basic logit model</li>
</ul>
</section>
<section id="independence-of-irrelevant-alternatives-iia-property" class="slide level2">
<h2>Independence of Irrelevant Alternatives (IIA) Property</h2>
<p>Consider we have two modes: auto (a) &amp; bus (b)</p>
<p><span class="math display">\[\frac{P_a}{P_b} = \frac{exp(V_a)}{exp(V_b)} = exp(V_a - V_b)\]</span> I.e., the relative probability of choosing auto vs.&nbsp;bus depends <strong>only</strong> on the utilities of the two alternatives</p>
<ul>
<li>Now what if our buses are <strong>red (rb)</strong> &amp; we paint half <strong>blue (bb)</strong>?</li>
</ul>
</section>
<section id="iia-cont" class="slide level2">
<h2>IIA Cont…</h2>
<ul>
<li>If the IIA assumption does not hold, we can make other error distribution assumptions
<ul>
<li>Nested logit (can handle complex decision structures)</li>
<li>Probit (normal error terms, very general model, but can be difficult to work with it)</li>
</ul></li>
</ul>
</section>
<section id="outline-1" class="slide level2 smaller">
<h2>Outline</h2>
<div class="columns">
<div class="column" style="width:60%;">
<div>
<ol type="1">
<li class="fragment">Problem definition &amp; assumptions</li>
<li class="fragment">Shortest path algorithms</li>
<li class="fragment">Representing congestion</li>
<li class="fragment">Treatment of time</li>
<li class="fragment">Random effects</li>
<li class="fragment">Wardrop’s rules: System optimal &amp; User equilibrium</li>
<li class="fragment">Assignment procedures: All-or-nothing, Capacity restraint, &amp; Deterministic user equilibrium</li>
</ol>
</div>
</div><div class="column" style="width:40%;">
<div class="quarto-figure quarto-figure-center">
<figure>
<p><img data-src="../images/lecture7/outline.png" class="quarto-figure quarto-figure-center"></p>
</figure>
</div>
</div></div>
</section>
<section id="trip-assignment-problem" class="slide level2 smaller">
<h2>Trip Assignment Problem</h2>
<p><img data-src="../images/lecture7/trip_problem.png" class="absolute" style="bottom: 0px; right: 200px; width: 60%; "></p>
<ul>
<li>Find the path (or paths) through the network <em>mostly likely</em> taken from node i to node j</li>
<li>Transport network is represented by links L
<ul>
<li>Each link has a start &amp; end node, as well as a cost C</li>
<li>Links can also be mode-specific (e.g., bus-only, bus &amp; vehicles)</li>
</ul></li>
<li>Link cost is a function of attributes: distance, free-flow speed, capacity, &amp; speed-flow relationship (volume-delay function)</li>
</ul>
</section>
<section id="trip-assignment" class="slide level2 smaller">
<h2>Trip Assignment</h2>
<p><strong>Primary Purpose</strong> - Aggregate network performance measures</p>
<ul>
<li>Highway flows, transit revenues, etc.</li>
<li>Zone-to-zone travel cost/time matrices</li>
<li>Determine approximate link flows &amp; identify heavily congested links</li>
</ul>
<p><strong>Secondary Purpose</strong></p>
<ul>
<li>Determine routes between each O-D pair</li>
<li>Analyze O-D pairs that use route/link</li>
<li>Reasonable indication of turning movement at intersections</li>
</ul>
</section>
<section id="trip-assignment---basic-inputs" class="slide level2">
<h2>Trip Assignment - Basic Inputs</h2>
<ul>
<li>Trip matrix expressing estimated demands: peak hour, 24-hour, etc.
<ul>
<li><strong>Person-trips</strong> need to be converted into <strong>vehicle-trips</strong> &amp; vehicles may need to be converted into passenger car units (<strong>PCUs</strong>)</li>
</ul></li>
<li>Network as links &amp; their properties, including speed-flow curves</li>
<li>Principles or route selection rules that are relevant to problem under investigation -&gt; <strong>choosing best route is subjective</strong></li>
</ul>
</section>
<section id="trip-assignment---route-choice-issues" class="slide level2 smaller">
<h2>Trip Assignment - Route Choice Issues</h2>
<ul>
<li><p>Differences in individual perceptions of what constitutes the best route: minimizing time, minimizing fuel consumption, or a combination of both?</p>
<p><strong>Solution:</strong> Multiple user classes &amp; generalized costs</p></li>
<li><p>Knowledge about alternatives varies -&gt; apparently irrational route choices</p>
<p><strong>Solution:</strong> Stochastic specifications</p></li>
<li><p>Congestion effects affect shorter routes first &amp; make generalized costs comparable to initially less attractive routes</p>
<p><strong>Solution:</strong> Congested assignment &amp; equilibrium</p></li>
</ul>
</section>
<section id="trip-assignment---basic-steps" class="slide level2">
<h2>Trip Assignment - Basic Steps</h2>
<ol type="1">
<li>Identify set of routes (shortest paths) that might be considered attractive to drivers between each O-D pair using shortest path algorithms</li>
<li>Assign suitable proportions of trip matrix to each route -&gt; flows on links in network</li>
<li>Search for <strong>convergence</strong></li>
</ol>
<ul>
<li>Many techniques follow an iterative pattern of successive approximations to an ideal solution – i.e., convergence criteria</li>
</ul>
</section>
<section id="shortest-path-calculations" class="slide level2">
<h2>Shortest Path Calculations</h2>
<ul>
<li>All assignment procedures depend on <strong>efficient calculation of shortest paths</strong> through large networks</li>
<li>Best algorithm depends on <strong>network size</strong> &amp; <strong>problem application</strong> (e.g., different procedures often used for road vs.&nbsp;transit assignment)</li>
</ul>
</section>
<section id="shortest-path---dijkstra-algorithm" class="slide level2 smaller">
<h2>Shortest Path - Dijkstra Algorithm</h2>
<ul>
<li>Find shortest path between nodes in a graph – e.g., road network</li>
<li>Conceived by computer scientist Edger W. Dijkstra in 1956</li>
<li><span class="math inline">\(N\)</span> is the set of all nodes (combination of labelled &amp; unlabeled nodes)</li>
<li><span class="math inline">\(\hat{𝑀}\)</span> is the set of all labelled nodes</li>
<li><span class="math inline">\(M\)</span> is the set of un-labeled nodes</li>
<li><span class="math inline">\(n_i\)</span> is the ith node</li>
<li><span class="math inline">\(c(n_i, n_j)\)</span> is the cost (travel time, distance, etc.) of traveling on the link from <span class="math inline">\(n_i\)</span> to <span class="math inline">\(n_j\)</span></li>
<li><span class="math inline">\(C(n_j)\)</span> is the total cost between “initial” node &amp; node <span class="math inline">\(n_j\)</span></li>
</ul>
</section>
<section id="shortest-path---dijkstra-algorithm-1" class="slide level2 smaller">
<h2>Shortest Path - Dijkstra Algorithm 1</h2>
<ol type="1">
<li>Assign to every node a tentative distance value: set it to <strong>zero</strong> for the initial node &amp; to <strong>infinity</strong> for all other nodes.</li>
<li>Set the initial node as the <strong>current node</strong> &amp; mark all other nodes as <strong>unvisited</strong>.</li>
<li>For the current node, consider all its <strong>unvisited neighbors</strong> &amp; calculate their tentative costs.</li>
<li>Compare the <strong>newly calculated tentative cost</strong> to the <strong>current assigned cost</strong> &amp; <strong>assign smaller of the two</strong>.
<ul>
<li>E.g., <strong>if</strong> current node A is marked with a cost of 6 &amp; the link connecting it with a neighbor node B has cost 2, then the cost to B (through A) is 6 + 2 = 8.</li>
<li><strong>If</strong> B was previously marked with a distance &gt; 8 then change it to 8. <strong>Else</strong>, keep the current value.</li>
</ul></li>
</ol>
</section>
<section id="shortest-path---dijkstra-algorithm-1-1" class="slide level2 smaller">
<h2>Shortest Path - Dijkstra Algorithm 1</h2>
<ol start="5" type="1">
<li><strong>If</strong> all neighbors of current node have been considered, then mark current node as visited &amp; <strong>remove from unvisited set</strong>.</li>
<li><strong>If</strong> destination node has been marked visited (when planning route between two nodes) or if <strong>smallest tentative cost</strong> among nodes in unvisited set is infinity (when planning a complete traversal; occurs when there is no connection between initial node &amp; remaining unvisited nodes) then stop. <strong>Algorithm complete</strong>.</li>
<li><strong>Else</strong> select unvisited node marked with <strong>smallest tentative distance</strong>, set as new current node, &amp; <strong>go to step 3</strong>.</li>
</ol>
</section>
<section id="shortest-path---dijkstra-algorithm-2" class="slide level2 smaller">
<h2>Shortest Path - Dijkstra Algorithm 2</h2>
<ol type="1">
<li>Set <span class="math inline">\(k = 1\)</span>. Choose a node as the <strong>initial node</strong>. Label this node [-,0] where the minus sign indicates there is <strong>no predecessor node</strong> &amp; the zero indicates there is <strong>zero cost</strong> associated with reaching this node. Set M equal to {<span class="math inline">\(n_1\)</span>} where <span class="math inline">\(n_1\)</span> is equal to the node number for the initial node.</li>
<li>Set <span class="math inline">\(k = 2\)</span>. Find an unlabeled node <span class="math inline">\(n_2\)</span> such that <span class="math inline">\(c(n_1, n_2)\)</span> is a minimum. Assign <span class="math inline">\(n_2\)</span> the label <span class="math inline">\([n_1, c(n_1,  n_2)]\)</span>, meaning <span class="math inline">\(n_1\)</span> is the predecessor node to <span class="math inline">\(n_2\)</span>. Add <span class="math inline">\(n_2\)</span> to the set of labeled nodes (i.e., <span class="math inline">\(M\)</span> now equals <span class="math inline">\(\{n_1, n_2\}\)</span>)</li>
<li>Set <span class="math inline">\(k = k + 1\)</span></li>
</ol>
</section>
<section id="shortest-path---dijkstra-algorithm-2-1" class="slide level2 smaller">
<h2>Shortest Path - Dijkstra Algorithm 2</h2>
<ol start="4" type="1">
<li>Find an unlabeled node <span class="math inline">\(n_k\)</span> such that <span class="math inline">\(C(n_k) = min \{C(n_x) + min[(n_x, n_y)]\}\)</span> for <span class="math inline">\(n_x \in M\)</span> &amp; <span class="math inline">\(n_y \in M’ = C(n_1) + c(n_i, n_k)\)</span> for some <span class="math inline">\(n_i \in M\)</span>, <span class="math inline">\(n_k \in M’\)</span>. Assign the label <span class="math inline">\([n_i, C(n_k)]\)</span> &amp; add <span class="math inline">\(n_k\)</span> to <span class="math inline">\(M\)</span>.
<ul>
<li>The equation above searches over the currently labeled nodes – all nodes connected to initial node with links to unlabeled nodes. Seeks new node to connect to initial node (i.e., add to labeled set), such that path to new node has <strong>lowest travel cost</strong> from initial node.</li>
</ul></li>
<li><strong>If</strong> all nodes labeled. <strong>Stop. Else, go to step 3.</strong></li>
</ol>
<p>Final product is <strong>shortest path tree</strong> rooted at node <span class="math inline">\(n_1\)</span></p>
</section>
<section id="shortest-path-example" class="slide level2">
<h2>Shortest Path Example</h2>
<p>What is the shortest path from Node 6 to All Others?</p>

<img data-src="../images/lecture7/shortest_path_node6.png" class="quarto-figure quarto-figure-center r-stretch"></section>
<section id="shortest-path-example-1" class="slide level2">
<h2>Shortest Path Example</h2>
<div class="columns">
<div class="column" style="width:50%;">
<p><strong>Step 1:</strong> Cost Table</p>
<table class="caption-top">
<thead>
<tr class="header">
<th style="text-align: center;">Node pair</th>
<th style="text-align: center;">Cost</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: center;">6,1</td>
<td style="text-align: center;">Infinity</td>
</tr>
<tr class="even">
<td style="text-align: center;">6,2</td>
<td style="text-align: center;">Infinity</td>
</tr>
<tr class="odd">
<td style="text-align: center;">6,3</td>
<td style="text-align: center;">Infinity</td>
</tr>
<tr class="even">
<td style="text-align: center;">6,4</td>
<td style="text-align: center;">Infinity</td>
</tr>
<tr class="odd">
<td style="text-align: center;">6,5</td>
<td style="text-align: center;">Infinity</td>
</tr>
<tr class="even">
<td style="text-align: center;">6</td>
<td style="text-align: center;">0</td>
</tr>
</tbody>
</table>
</div><div class="column" style="width:50%;">
<p><strong>Step 2:</strong> Visitation Table</p>
<table class="caption-top">
<thead>
<tr class="header">
<th style="text-align: center;">Node</th>
<th style="text-align: center;">Visited?</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: center;">1</td>
<td style="text-align: center;">No</td>
</tr>
<tr class="even">
<td style="text-align: center;">2</td>
<td style="text-align: center;">No</td>
</tr>
<tr class="odd">
<td style="text-align: center;">3</td>
<td style="text-align: center;">No</td>
</tr>
<tr class="even">
<td style="text-align: center;">4</td>
<td style="text-align: center;">No</td>
</tr>
<tr class="odd">
<td style="text-align: center;">5</td>
<td style="text-align: center;">No</td>
</tr>
<tr class="even">
<td style="text-align: center;">6</td>
<td style="text-align: center;">Current</td>
</tr>
</tbody>
</table>
</div></div>
</section>
<section id="shortest-path-example-2" class="slide level2 smaller">
<h2>Shortest Path Example</h2>
<div class="columns">
<div class="column" style="width:50%;">
<p><strong>Step 3:</strong> Find neighbors of current node Node 6 neigbors: {1,4,5}</p>
<p><strong>Step 4:</strong> Update tentative costs</p>
<table class="caption-top">
<thead>
<tr class="header">
<th style="text-align: center;">Node pair</th>
<th style="text-align: center;">Cost (previous cost)</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: center;">6,1</td>
<td style="text-align: center;">5 (infinity)</td>
</tr>
<tr class="even">
<td style="text-align: center;">6,4</td>
<td style="text-align: center;">3 (infinity)</td>
</tr>
<tr class="odd">
<td style="text-align: center;">6,5</td>
<td style="text-align: center;">8 (infinity)</td>
</tr>
</tbody>
</table>
<p>Costs are less than previous, so <strong>update table</strong></p>
</div><div class="column" style="width:50%;">
<div class="quarto-figure quarto-figure-center">
<figure>
<p><img data-src="../images/lecture7/diag_node6.png" class="quarto-figure quarto-figure-center" style="width:100.0%"></p>
</figure>
</div>
</div></div>
</section>
<section id="shortest-path-example-3" class="slide level2">
<h2>Shortest Path Example</h2>

<img data-src="../images/lecture7/shortest_path_tree_node_6.png" class="quarto-figure quarto-figure-center r-stretch"></section>
<section id="trip-assignment-assumptions" class="slide level2">
<h2>Trip Assignment Assumptions</h2>
<ol type="1">
<li>Fixed costs (no congestion) vs.&nbsp;variable costs (congestion effects)</li>
<li>Static vs.&nbsp;dynamic</li>
<li>Deterministic vs.&nbsp;stochastic</li>
<li>System optimization vs.&nbsp;user equilibrium</li>
</ol>
</section>
<section id="fixed-cost-assumption" class="slide level2">
<h2>Fixed Cost Assumption</h2>
<ul>
<li>Reasonable to ignore congestion effects in certain cases:
<ul>
<li>Most transit assignment</li>
<li>Most intercity cases</li>
<li>Rural areas</li>
<li>Small urban areas</li>
<li>Off-peak time periods if volumes are low</li>
</ul></li>
</ul>
</section>
<section id="congestion-effects" class="slide level2 smaller">
<h2>Congestion Effects</h2>
<p><img data-src="../images/lecture7/congestion_effect.png" class="absolute" style="bottom: 0px; right: 200px; width: 75%; "></p>
<ul>
<li>On most urban road networks, <strong>congestion effects are significant</strong> (especially during peak periods)</li>
<li>Generally, use <strong>volume-delay curve</strong> to predict link travel time (t) as function of link volume (v)</li>
<li>Volume-delay functions are simple approximations to true link performance</li>
</ul>
</section>
<section id="volume-delay-function-supply-curveperformance-function" class="slide level2">
<h2>Volume-Delay Function: Supply Curve/Performance Function</h2>

<img data-src="../images/lecture7/vdf_function.png" class="quarto-figure quarto-figure-center r-stretch"></section>
<section id="common-vdfs" class="slide level2">
<h2>Common VDFs</h2>
<ul>
<li>Need a continuous, differentiable function</li>
<li>Bureau of Public Roads (<strong>BPR</strong>) function is most common function worldwide</li>
<li><strong>Tangent function</strong> another common method
<ul>
<li>Converges more quickly</li>
<li>More realistic results for oversaturated case</li>
</ul></li>
</ul>
</section>
<section id="bpr-function" class="slide level2 smaller">
<h2>BPR Function</h2>
<p><span class="math display">\[t=(\frac{L}{S})(1+a(\frac{v}{c})^b)\]</span> <span class="math display">\[t=t_0(1+a(\frac{v}{c})^b)\]</span></p>
<p>Where:</p>
<p><span class="math inline">\(t\)</span> = link travel time (min)</p>
<p><span class="math inline">\(L\)</span> = link length (mi)</p>
<p><span class="math inline">\(S\)</span> = link uncongested average speed (mi/min)</p>
<p><span class="math inline">\(t_0\)</span> = free-flow travel speed = L / S</p>
<p><span class="math inline">\(v\)</span> = link volume (veh/hr)</p>
<p><span class="math inline">\(c\)</span> = link capacity (veh/hr)</p>
<p><span class="math inline">\(a\)</span> = parameter = 1.0 if one-hr assignment or 0.15 if 24-hr assignment</p>
<p><span class="math inline">\(b\)</span> = parameter = 4 for arterial roads or 6 for freeway</p>
</section>
<section id="tangent-function" class="slide level2">
<h2>Tangent Function</h2>
<ul>
<li>Function identical for BPR values of v/c &lt; 1.0 (<strong>under-saturated case</strong>)</li>
<li>For v/c &gt; 1.0 (<strong>oversaturated case</strong>), use a straight line with slope = BPR slope at v/c = 1</li>
</ul>
<p><span class="math display">\[t = \begin{cases}
t_0(1+a(\frac{v}{c})^b), \frac{v}{c} \leq 1 \\
t_0((1+a-ab)+ab(\frac{v}{c})), \frac{v}{c} &gt; 1
\end{cases}\]</span></p>
<p>For <span class="math inline">\(a = 1\)</span> &amp; <span class="math inline">\(b = 4\)</span>, gives <span class="math inline">\(t=t_0(4(\frac{v}{c})-2)\)</span></p>
</section>
<section id="example-bpr-function" class="slide level2">
<h2>Example BPR Function</h2>

<img data-src="../images/lecture7/bpr_function.png" class="quarto-figure quarto-figure-center r-stretch"></section>
<section id="static-vs.-dynamic-assignment" class="slide level2">
<h2>Static Vs. Dynamic Assignment</h2>
<ul>
<li><strong>Static assignment</strong> procedures assign trips to all links on a chosen path simultaneously – i.e., time taken to travel from link to link is ignored</li>
<li><strong>Dynamic assignment</strong> procedures assign trips to each link in the chosen path sequentially, taking into account the time taken to travel along each link</li>
<li><strong>Dynamic assignment</strong> more realistic, but much more complex &amp; computationally intensive</li>
</ul>
</section>
<section id="deterministic-vs.-stochastic-assignment" class="slide level2">
<h2>Deterministic Vs. Stochastic Assignment</h2>
<ul>
<li><strong>Deterministic assignment:</strong> Assume that travel times are known with certainty by trip-makers &amp; they make perfectly optimal route choices</li>
<li><strong>Stochastic assignment:</strong> Travel times are not known with certainty by trip-makers &amp;/or they are imperfect optimizers &amp;/or include other factors in decision-making</li>
</ul>
</section>
<section id="stochastic-assignment" class="slide level2">
<h2>Stochastic Assignment</h2>
<ul>
<li><strong>Stochastic assignment</strong> used for some applications:
<ul>
<li>Some transit assignment algorithms</li>
<li>Moderately (but not heavily) congested networks</li>
<li>Highly abstracted (i.e., aggregated) networks</li>
</ul></li>
<li><strong>Discrete route choice models</strong> (e.g., logit) exist
<ul>
<li>Computationally burdensome</li>
<li>Need to take care in defining choice set of feasible routes</li>
</ul></li>
</ul>
</section>
<section id="deterministic-assignment" class="slide level2">
<h2>Deterministic Assignment</h2>
<ul>
<li>Deterministic assignment used in <strong>most urban applications</strong>
<ul>
<li>Simpler &amp; easier to use</li>
<li>Computationally more efficient</li>
<li>Deterministic assumptions not bad in congested networks (i.e., where penalty choosing non-optimal route is high)</li>
</ul></li>
</ul>
</section>
<section id="deterministic-vs.-stochastic-assignment-1" class="slide level2 smaller">
<h2>Deterministic Vs. Stochastic Assignment</h2>
<div class="columns">
<div class="column" style="width:50%;">
<div class="quarto-figure quarto-figure-center">
<figure>
<p><img data-src="../images/lecture7/deterministic_stochastic.png" class="quarto-figure quarto-figure-center"></p>
</figure>
</div>
</div><div class="column" style="width:50%;">
<ul>
<li><strong>I:</strong> in <strong>fairly uncongested condition</strong> as network is going towards saturation. Deterministic &amp; stochastic assignment work in same way</li>
<li><strong>II:</strong> <strong>Congestion building up</strong> &amp; deterministic approach will under-estimate effect.
<ul>
<li>Stochastic assignment is better.</li>
</ul></li>
<li><strong>III:</strong> <strong>Highly congested situation</strong>, small increase in volume causes larger increase in time.
<ul>
<li>Penalty for wrong information would incur high delay. Assuming users aware of situation, deterministic assignment more appropriate.</li>
</ul></li>
</ul>
</div></div>
</section>
<section id="wardrops-rule" class="slide level2">
<h2>Wardrop’s Rule</h2>
<ul>
<li>Wardrop (1952) credited with first identifying two fundamental approaches to trip assignment</li>
<li><strong>System optimization:</strong> Assign O-D flows to paths to minimize total (average) system travel time</li>
<li><strong>User equilibrium:</strong> Assign O-D flows so no user in system can unilaterally change routes &amp; improve his/her travel time</li>
</ul>
</section>
<section id="system-optimization" class="slide level2">
<h2>System Optimization</h2>
<ul>
<li>Assign O-D flows so they generate a set of link flows {Vl} that <strong>minimizes total travel time in system</strong> <span class="math display">\[min \sum_l V_l f(V_l)\]</span></li>
<li>System optimization works for many freight applications or passenger travel in modes with dedicated ROW</li>
<li><strong>Does not</strong> describe human route choice well</li>
</ul>
</section>
<section id="user-equilibrium" class="slide level2">
<h2>User Equilibrium</h2>
<ul>
<li>Each trip-maker chooses his/her route through network to <strong>minimize his/her individual travel time</strong></li>
<li>Equilibrium is achieved when every trip-maker is using best route possible, given prevailing congestion levels</li>
<li>Equilibrium = no user can switch routes &amp; improve his/her travel time, so no user will switch voluntarily</li>
</ul>
</section>
<section id="trip-assignment-procedures-for-cive461" class="slide level2">
<h2>Trip Assignment Procedures for CIVE461</h2>
<ol type="1">
<li><strong>All-or-nothing:</strong> Fixed cost, static, deterministic &amp; non-equilibrium:</li>
<li><strong>Incremental assignment:</strong> Variable cost, static, deterministic &amp; non-equilibrium procedure</li>
<li><strong>Deterministic user equilibrium (DUE):</strong> Variable cost, static, deterministic, &amp; equilibrium assignment</li>
</ol>
</section>
<section id="all-or-nothing-assignment" class="slide level2">
<h2>All-Or-Nothing Assignment</h2>
<ul>
<li>If <strong>no congestion effects</strong>, then DUE implies there is a single best route for each trip-maker
<ul>
<li>Simple</li>
<li>Easy to understand</li>
<li>Easy to compute</li>
<li>Often used for transit assignment</li>
</ul></li>
<li>Not applicable to congested road networks</li>
</ul>
</section>
<section id="all-or-nothing-algorithm" class="slide level2">
<h2>All-Or-Nothing Algorithm</h2>
<div class="cell" data-layout-align="default">
<div class="cell-output-display">
<div>
<p></p><figure class=""><p></p>
<div>
<svg width="960" height="480" viewbox="0.00 0.00 248.77 188.00" xmlns="http://www.w3.org/2000/svg" xlink="http://www.w3.org/1999/xlink" style="; max-width: none; max-height: none; display: block; margin: auto auto auto auto">
<g id="graph0" class="graph" transform="scale(1 1) rotate(0) translate(4 184)">
<title>mygraph</title>
<polygon fill="white" stroke="transparent" points="-4,4 -4,-184 244.77,-184 244.77,4 -4,4"></polygon>
<!-- Compute link travel times -->
<g id="node1" class="node">
<title>Compute link travel times</title>
<polygon fill="none" stroke="black" points="201.2,-180 39.58,-180 39.58,-144 201.2,-144 201.2,-180"></polygon>
<text text-anchor="middle" x="120.39" y="-157.8" font-family="Times,serif" font-size="14.00">Compute link travel times</text>
</g>
<!-- Find shortest paths for all OD pairs -->
<g id="node2" class="node">
<title>Find shortest paths for all OD pairs</title>
<polygon fill="none" stroke="black" points="226.92,-108 13.85,-108 13.85,-72 226.92,-72 226.92,-108"></polygon>
<text text-anchor="middle" x="120.39" y="-85.8" font-family="Times,serif" font-size="14.00">Find shortest paths for all OD pairs</text>
</g>
<!-- Compute link travel times&#45;&gt;Find shortest paths for all OD pairs -->
<g id="edge1" class="edge">
<title>Compute link travel times-&gt;Find shortest paths for all OD pairs</title>
<path fill="none" stroke="black" d="M120.39,-143.7C120.39,-135.98 120.39,-126.71 120.39,-118.11"></path>
<polygon fill="black" stroke="black" points="123.89,-118.1 120.39,-108.1 116.89,-118.1 123.89,-118.1"></polygon>
</g>
<!-- Assign all flows to minimum time paths -->
<g id="node3" class="node">
<title>Assign all flows to minimum time paths</title>
<polygon fill="none" stroke="black" points="240.66,-36 0.11,-36 0.11,0 240.66,0 240.66,-36"></polygon>
<text text-anchor="middle" x="120.39" y="-13.8" font-family="Times,serif" font-size="14.00">Assign all flows to minimum time paths</text>
</g>
<!-- Find shortest paths for all OD pairs&#45;&gt;Assign all flows to minimum time paths -->
<g id="edge2" class="edge">
<title>Find shortest paths for all OD pairs-&gt;Assign all flows to minimum time paths</title>
<path fill="none" stroke="black" d="M120.39,-71.7C120.39,-63.98 120.39,-54.71 120.39,-46.11"></path>
<polygon fill="black" stroke="black" points="123.89,-46.1 120.39,-36.1 116.89,-46.1 123.89,-46.1"></polygon>
</g>
</g>
</svg>
</div>
<p></p></figure><p></p>
</div>
</div>
</div>
</section>
<section id="all-or-nothing-assignment-example" class="slide level2 smaller">
<h2>All-Or-Nothing Assignment: Example</h2>
<p>OD trips to be assigned:</p>
<p>A-C = 400</p>
<p>A-D = 200</p>
<p>B-C = 300</p>
<p>B-D = 100</p>
<ol type="1">
<li>Find shortest paths for A-D, A-C, B-C, &amp; B-D</li>
<li>Assign all trips to corresponding shortest paths</li>
</ol>
<p><img data-src="../images/lecture7/aon_1.png" class="absolute" style="top: 75px; right: 0px; width: 40%; "> <img data-src="../images/lecture7/aon_2.png" class="absolute" style="top: 325px; right: 0px; width: 40%; "> <img data-src="../images/lecture7/aon_3.png" class="absolute" style="bottom: 0px; right: 100px; width: 40%; "></p>
</section>
<section id="all-or-nothing-assignment-example-1" class="slide level2">
<h2>All-Or-Nothing Assignment: Example</h2>
<p>Sum all assigned trips to get complete assignment</p>

<img data-src="../images/lecture7/aon_4.png" class="quarto-figure quarto-figure-center r-stretch" style="width:50.0%"></section>
<section id="incremental-assignment-methods" class="slide level2">
<h2>Incremental Assignment Methods</h2>
<ul>
<li><strong>Incorporating congestion</strong> into user equilibrium calculations adds significant complexity to problem</li>
<li>Originally, planners used <strong>ad hoc capacity constraint methods</strong> to generate approximations to user equilibrium solution</li>
<li>However, these methods generally unsatisfactory</li>
</ul>
</section>
<section id="incremental-assignment-methods-1" class="slide level2">
<h2>Incremental Assignment Methods</h2>

<img data-src="../images/lecture7/incremental_assign.png" class="quarto-figure quarto-figure-center r-stretch"></section>
<section id="incremental-assignment-example" class="slide level2" style="font-size: 0.5em;">
<h2>Incremental Assignment: Example</h2>
<div class="columns">
<div class="column" style="width:50%;">
<p><img data-src="../images/lecture7/incremental_assign_ex_1.png" class="absolute" style="left: 0px; bottom: 0px; width: 30%; "></p>
<p><span class="math display">\[t_1 = \frac{t_{01}}{1-v_1/c_1}\]</span> where:</p>
<p><span class="math inline">\(t_1\)</span> = travel time on link 1</p>
<p><span class="math inline">\(t_{01}\)</span> = travel time on link 1 under zero flow condition</p>
<p><span class="math inline">\(v_1\)</span> = volume on link 1</p>
<p><span class="math inline">\(c_1\)</span> = capacity of link 1</p>
<table class="caption-top">
<thead>
<tr class="header">
<th>Link</th>
<th>1</th>
<th>2</th>
<th>3</th>
<th>4</th>
<th>5</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td><span class="math inline">\(T_0\)</span></td>
<td>10</td>
<td>15</td>
<td>3</td>
<td>5</td>
<td>4</td>
</tr>
<tr class="even">
<td><strong>Capacity</strong></td>
<td>300</td>
<td>500</td>
<td>150</td>
<td>200</td>
<td>200</td>
</tr>
</tbody>
</table>
</div><div class="column" style="width:50%;">
<p>O-D trips to assign:</p>
<table class="caption-top">
<thead>
<tr class="header">
<th>From/To</th>
<th>1</th>
<th>2</th>
<th>3</th>
<th>4</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td><strong>1</strong></td>
<td>0</td>
<td>100</td>
<td>100</td>
<td>100</td>
</tr>
<tr class="even">
<td><strong>2</strong></td>
<td>0</td>
<td>0</td>
<td>50</td>
<td>50</td>
</tr>
<tr class="odd">
<td><strong>3</strong></td>
<td>0</td>
<td>0</td>
<td>0</td>
<td>100</td>
</tr>
<tr class="even">
<td><strong>4</strong></td>
<td>0</td>
<td>0</td>
<td>0</td>
<td>0</td>
</tr>
</tbody>
</table>
<p>Random assignment order:</p>
<table class="caption-top">
<thead>
<tr class="header">
<th></th>
<th>To</th>
<th></th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>O-D Pair</td>
<td>1</td>
<td>2</td>
</tr>
<tr class="even">
<td>(1,2)</td>
<td>1</td>
<td>3</td>
</tr>
<tr class="odd">
<td>(1,3)</td>
<td>6</td>
<td>6</td>
</tr>
<tr class="even">
<td>(1,4)</td>
<td>2</td>
<td>4</td>
</tr>
<tr class="odd">
<td>(2,3)</td>
<td>3</td>
<td>2</td>
</tr>
<tr class="even">
<td>(2,4)</td>
<td>5</td>
<td>5</td>
</tr>
<tr class="odd">
<td>(3,4</td>
<td>4</td>
<td>1</td>
</tr>
</tbody>
</table>
</div></div>
</section>
<section id="incremental-assignment-example-1" class="slide level2 smaller">
<h2>Incremental Assignment: Example</h2>
<p>Update travel times</p>
<ul>
<li>1st iteration: 50% assignment &amp; given order</li>
<li>Start with FF travel time (<span class="math inline">\(t_0\)</span>) &amp; update after each assignment pair</li>
<li>Use updated times for next shortest path calculation</li>
</ul>
<div style="font-size: 0.3em;">
<table class="caption-top" style="width:100%;">
<colgroup>
<col style="width: 46%">
<col style="width: 6%">
<col style="width: 13%">
<col style="width: 6%">
<col style="width: 13%">
<col style="width: 13%">
</colgroup>
<thead>
<tr class="header">
<th><strong>O-D pair (1,2) : V (1,2) = 50</strong></th>
<th></th>
<th></th>
<th></th>
<th></th>
<th></th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td><strong>Link</strong></td>
<td>1</td>
<td>2</td>
<td>3</td>
<td>4</td>
<td>5</td>
</tr>
<tr class="even">
<td><strong>V</strong></td>
<td>50</td>
<td>0</td>
<td>0</td>
<td>0</td>
<td>0</td>
</tr>
<tr class="odd">
<td><strong>t</strong></td>
<td>12</td>
<td>15</td>
<td>3</td>
<td>5</td>
<td>4</td>
</tr>
<tr class="even">
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
</tr>
<tr class="odd">
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
</tr>
<tr class="even">
<td><strong>O-D pair (1,4) : V (1,4) = 50</strong></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
</tr>
<tr class="odd">
<td><strong>Link</strong></td>
<td>1</td>
<td>2</td>
<td>3</td>
<td>4</td>
<td>5</td>
</tr>
<tr class="even">
<td><strong>V</strong></td>
<td>100</td>
<td>0</td>
<td>0</td>
<td>50</td>
<td>0</td>
</tr>
<tr class="odd">
<td><strong>t</strong></td>
<td>15</td>
<td>15</td>
<td>3</td>
<td>6.666667</td>
<td>4</td>
</tr>
<tr class="even">
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
</tr>
<tr class="odd">
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
</tr>
<tr class="even">
<td><strong>O-D pair (2,3) : V (2,3) = 25</strong></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
</tr>
<tr class="odd">
<td><strong>Link</strong></td>
<td>1</td>
<td>2</td>
<td>3</td>
<td>4</td>
<td>5</td>
</tr>
<tr class="even">
<td><strong>V</strong></td>
<td>100</td>
<td>0</td>
<td>25</td>
<td>50</td>
<td>0</td>
</tr>
<tr class="odd">
<td><strong>t</strong></td>
<td>15</td>
<td>15</td>
<td>3.6</td>
<td>6.666667</td>
<td>4</td>
</tr>
<tr class="even">
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
</tr>
<tr class="odd">
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
</tr>
<tr class="even">
<td><strong>O-D pair (3,4) : V (3,4) = 50</strong></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
</tr>
<tr class="odd">
<td><strong>Link</strong></td>
<td>1</td>
<td>2</td>
<td>3</td>
<td>4</td>
<td>5</td>
</tr>
<tr class="even">
<td><strong>V</strong></td>
<td>100</td>
<td>0</td>
<td>25</td>
<td>50</td>
<td>50</td>
</tr>
<tr class="odd">
<td><strong>t</strong></td>
<td>15</td>
<td>15</td>
<td>3.6</td>
<td>6.666667</td>
<td>5.333333</td>
</tr>
<tr class="even">
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
</tr>
<tr class="odd">
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
</tr>
<tr class="even">
<td><strong>O-D pair (2,4) : V (2,4) = 25</strong></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
</tr>
<tr class="odd">
<td><strong>Link</strong></td>
<td>1</td>
<td>2</td>
<td>3</td>
<td>4</td>
<td>5</td>
</tr>
<tr class="even">
<td><strong>V</strong></td>
<td>100</td>
<td>0</td>
<td>25</td>
<td>75</td>
<td>50</td>
</tr>
<tr class="odd">
<td><strong>t</strong></td>
<td>15</td>
<td>15</td>
<td>3.6</td>
<td>8</td>
<td>5.333333</td>
</tr>
<tr class="even">
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
</tr>
<tr class="odd">
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
</tr>
<tr class="even">
<td><strong>O-D pair (1,3) : V (1,3) = 50</strong></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
</tr>
<tr class="odd">
<td><strong>Link</strong></td>
<td>1</td>
<td>2</td>
<td>3</td>
<td>4</td>
<td>5</td>
</tr>
<tr class="even">
<td><strong>V</strong></td>
<td>100</td>
<td>50</td>
<td>25</td>
<td>75</td>
<td>50</td>
</tr>
<tr class="odd">
<td><strong>t</strong></td>
<td>15</td>
<td>16.66667</td>
<td>3.6</td>
<td>8</td>
<td>5.333333</td>
</tr>
</tbody>
</table>
</div>
</section>
<section id="incremental-assignment-example-2" class="slide level2 smaller">
<h2>Incremental Assignment: Example</h2>
<p>Update travel times</p>
<ul>
<li>2nd iteration: 50% assignment &amp; given order</li>
</ul>
<div style="font-size: 0.3em;">
<table class="caption-top">
<colgroup>
<col style="width: 45%">
<col style="width: 10%">
<col style="width: 10%">
<col style="width: 10%">
<col style="width: 10%">
<col style="width: 10%">
</colgroup>
<thead>
<tr class="header">
<th><strong>O-D pair (3,4) : V (3,4) = 50</strong></th>
<th></th>
<th></th>
<th></th>
<th></th>
<th></th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td><strong>Link</strong></td>
<td>1</td>
<td>2</td>
<td>3</td>
<td>4</td>
<td>5</td>
</tr>
<tr class="even">
<td><strong>V</strong></td>
<td>100</td>
<td>50</td>
<td>25</td>
<td>75</td>
<td>100</td>
</tr>
<tr class="odd">
<td><strong>t</strong></td>
<td>15</td>
<td>16.66667</td>
<td>3.6</td>
<td>8</td>
<td>8</td>
</tr>
<tr class="even">
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
</tr>
<tr class="odd">
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
</tr>
<tr class="even">
<td><strong>O-D pair (2,3) : V (2,3) = 25</strong></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
</tr>
<tr class="odd">
<td><strong>Link</strong></td>
<td>1</td>
<td>2</td>
<td>3</td>
<td>4</td>
<td>5</td>
</tr>
<tr class="even">
<td><strong>V</strong></td>
<td>100</td>
<td>50</td>
<td>50</td>
<td>75</td>
<td>100</td>
</tr>
<tr class="odd">
<td><strong>t</strong></td>
<td>15</td>
<td>16.66667</td>
<td>4.5</td>
<td>8</td>
<td>8</td>
</tr>
<tr class="even">
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
</tr>
<tr class="odd">
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
</tr>
<tr class="even">
<td><strong>O-D pair (1,2) : V (1,2) = 50</strong></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
</tr>
<tr class="odd">
<td><strong>Link</strong></td>
<td>1</td>
<td>2</td>
<td>3</td>
<td>4</td>
<td>5</td>
</tr>
<tr class="even">
<td><strong>V</strong></td>
<td>150</td>
<td>50</td>
<td>50</td>
<td>75</td>
<td>100</td>
</tr>
<tr class="odd">
<td><strong>t</strong></td>
<td>20</td>
<td>16.66667</td>
<td>4.5</td>
<td>8</td>
<td>8</td>
</tr>
<tr class="even">
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
</tr>
<tr class="odd">
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
</tr>
<tr class="even">
<td><strong>O-D pair (1,4) : V (1,4) = 50</strong></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
</tr>
<tr class="odd">
<td><strong>Link</strong></td>
<td>1</td>
<td>2</td>
<td>3</td>
<td>4</td>
<td>5</td>
</tr>
<tr class="even">
<td><strong>V</strong></td>
<td>150</td>
<td>100</td>
<td>50</td>
<td>75</td>
<td>150</td>
</tr>
<tr class="odd">
<td><strong>t</strong></td>
<td>20</td>
<td>18.75</td>
<td>4.5</td>
<td>8</td>
<td>16</td>
</tr>
<tr class="even">
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
</tr>
<tr class="odd">
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
</tr>
<tr class="even">
<td><strong>O-D pair (2,4) : V (2,4) = 25</strong></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
</tr>
<tr class="odd">
<td><strong>Link</strong></td>
<td>1</td>
<td>2</td>
<td>3</td>
<td>4</td>
<td>5</td>
</tr>
<tr class="even">
<td><strong>V</strong></td>
<td>150</td>
<td>100</td>
<td>50</td>
<td>100</td>
<td>150</td>
</tr>
<tr class="odd">
<td><strong>t</strong></td>
<td>20</td>
<td>18.75</td>
<td>4.5</td>
<td>10</td>
<td>16</td>
</tr>
<tr class="even">
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
</tr>
<tr class="odd">
<td><strong>Final Flow and Corresponding Travel Time on Links</strong></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
</tr>
<tr class="even">
<td><strong>O-D pair (1,3) : V (1,3) = 50</strong></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
</tr>
<tr class="odd">
<td><strong>Link</strong></td>
<td>1</td>
<td>2</td>
<td>3</td>
<td>4</td>
<td>5</td>
</tr>
<tr class="even">
<td><strong>V</strong></td>
<td>150</td>
<td>150</td>
<td>50</td>
<td>100</td>
<td>150</td>
</tr>
<tr class="odd">
<td><strong>t</strong></td>
<td>20</td>
<td>21.42857</td>
<td>4.5</td>
<td>10</td>
<td>16</td>
</tr>
</tbody>
</table>
</div>
</section>
<section id="capacity-constrained-deterministic-user-equilibrium-due" class="slide level2">
<h2>Capacity Constrained Deterministic User Equilibrium (DUE)</h2>
<ul>
<li>Note the two routes between same O-D pair will be used by trip-makers iff the travel times on the two routes are the same.</li>
<li>Consider a single O-D pair (origin A &amp; destination B) with two links (routes) connection them (1 &amp; 2)</li>
</ul>

<img data-src="../images/lecture7/due.png" class="quarto-figure quarto-figure-center r-stretch"></section>
<section id="due-assignment-example" class="slide level2">
<h2>DUE Assignment: Example</h2>
<p>Must determine link flows {V1, V2} such that <span class="math display">\[𝑉_1+𝑉_2=𝑉_𝐴𝐵\]</span> <span class="math display">\[𝑡_1=𝑡_2=𝑡^∗\]</span> Where <span class="math inline">\(t^*\)</span> is the equilibrium travel time between A &amp; B</p>
</section>
<section id="volume-delay-functions-vdf-for-links-1-2" class="slide level2">
<h2>Volume-Delay Functions (VDF) for Links 1 &amp; 2</h2>

<img data-src="../images/lecture7/vdf_links.png" class="quarto-figure quarto-figure-center r-stretch"></section>
<section id="equilibrium-solution" class="slide level2">
<h2>Equilibrium Solution</h2>
<p><span class="math display">\[𝐹_1=\int_0^{𝑣_1^∗} f_1(v_1) dv_1
\]</span> <span class="math display">\[𝐹_2=\int_0^{v_2^*}f_2(v_2) dv_2
\]</span></p>
<ul>
<li>At equilibrium, minimum <span class="math inline">\(F = F1 + F2\)</span></li>
<li>At any non-equilibrium point, <strong>total area under both curves is not minimum</strong>: there is extra shaded area</li>
</ul>
</section>
<section id="equilibrium-solution-1" class="slide level2">
<h2>Equilibrium Solution</h2>
<ul>
<li><strong>Special case:</strong> curves may not intersect</li>
<li>Here, optimum is area under <span class="math inline">\(f_2(v_2)\)</span> <img data-src="../images/lecture7/eqn_soln_3.png" class="absolute" style="bottom: 0px; right: 200px; width: 50%; "></li>
</ul>
</section>
<section id="frank-wolfe-algorithm" class="slide level2 smaller">
<h2>Frank-Wolfe Algorithm</h2>
<ul>
<li>Equilibrium link volumes are such that the sum of the areas under the volume-delay curves equals the minimum value achievable:</li>
<li>F(V) given by <span class="math display">\[min \sum_l \int_0^{v_l}f_l(v) d(v)  \text{   (𝐸𝑄1)}\]</span></li>
<li>Above equation generalizes to any number of O-D pairs &amp; any number of links per path</li>
</ul>
<p><img data-src="../images/lecture7/frank_wolfe.png" class="absolute" style="bottom: 0px; right: 250px; width: 45%; "></p>
</section>
<section id="frank-wolfe-algorithm-1" class="slide level2">
<h2>Frank-Wolfe Algorithm</h2>

<img data-src="../images/lecture7/frank_wolfe_fig_1.png" class="quarto-figure quarto-figure-center r-stretch"></section>
<section id="frank-wolfe-algorithm-2" class="slide level2">
<h2>Frank-Wolfe Algorithm</h2>

<img data-src="../images/lecture7/frank_wolfe_fig_2.png" class="quarto-figure quarto-figure-center r-stretch"></section>
<section id="three-route-example" class="slide level2">
<h2>Three Route Example</h2>
<div class="cell" data-reveal="true" data-layout-align="default">
<div class="cell-output-display">
<div>
<p></p><figure class=""><p></p>
<div>
<pre class="mermaid mermaid-js">flowchart LR
  A[P] ----&gt;|1| B(Q)
  A[P] ----&gt;|2| B(Q)
  A[P] ----&gt;|3| B(Q)
</pre>
</div>
<p></p></figure><p></p>
</div>
</div>
</div>
<p><span class="math display">\[f_1(v_1) = 10(1+0.15(v_1/200)^4)\]</span> <span class="math display">\[f_2(v_2) = 20(1+0.15(v_1/400)^4)\]</span> <span class="math display">\[f_3(v_3) = 25(1+0.15(v_1/300)^4)\]</span></p>
</section>
<section id="three-route-example---solution" class="slide level2 smaller">
<h2>Three Route Example - Solution</h2>
<p>We’ll start by creating a Pandas dataframe to store the iteration variables</p>
<div class="sourceCode" id="cb1" data-code-line-numbers="5-15"><pre class="sourceCode numberSource python number-lines code-with-copy"><code class="sourceCode python"><span id="cb1-1"><a></a><span class="im">import</span> pandas <span class="im">as</span> pd</span>
<span id="cb1-2"><a></a><span class="im">import</span> numpy <span class="im">as</span> np</span>
<span id="cb1-3"><a></a><span class="im">from</span> scipy.optimize <span class="im">import</span> minimize_scalar</span>
<span id="cb1-4"><a></a></span>
<span id="cb1-5"><a></a>df <span class="op">=</span> pd.DataFrame({<span class="st">"f1"</span>: pd.Series(dtype<span class="op">=</span><span class="st">'float'</span>),</span>
<span id="cb1-6"><a></a>                  <span class="st">"f2"</span>: pd.Series(dtype<span class="op">=</span><span class="st">'float'</span>),</span>
<span id="cb1-7"><a></a>                  <span class="st">"f3"</span>: pd.Series(dtype<span class="op">=</span><span class="st">'float'</span>),</span>
<span id="cb1-8"><a></a>                  <span class="st">"V1"</span>: pd.Series(dtype<span class="op">=</span><span class="st">'float'</span>),</span>
<span id="cb1-9"><a></a>                  <span class="st">"V2"</span>: pd.Series(dtype<span class="op">=</span><span class="st">'float'</span>),</span>
<span id="cb1-10"><a></a>                  <span class="st">"V3"</span>: pd.Series(dtype<span class="op">=</span><span class="st">'float'</span>),</span>
<span id="cb1-11"><a></a>                  <span class="st">"F1"</span>: pd.Series(dtype<span class="op">=</span><span class="st">'float'</span>),</span>
<span id="cb1-12"><a></a>                  <span class="st">"F2"</span>: pd.Series(dtype<span class="op">=</span><span class="st">'float'</span>),</span>
<span id="cb1-13"><a></a>                  <span class="st">"F3"</span>: pd.Series(dtype<span class="op">=</span><span class="st">'float'</span>),</span>
<span id="cb1-14"><a></a>                  <span class="st">"F"</span>: pd.Series(dtype<span class="op">=</span><span class="st">'float'</span>),</span>
<span id="cb1-15"><a></a>                  <span class="st">"lambda"</span>: pd.Series(dtype<span class="op">=</span><span class="st">'float'</span>)})</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</section>
<section id="three-route-example---solution-1" class="slide level2 smaller">
<h2>Three Route Example - Solution</h2>
<p>We can then define the inputs to the traffic assignment algorithm.</p>
<div class="sourceCode" id="cb2"><pre class="sourceCode numberSource python number-lines code-with-copy"><code class="sourceCode python"><span id="cb2-1"><a></a><span class="co"># Specify the freeflow travel times/capacities</span></span>
<span id="cb2-2"><a></a>ff_tt_1 <span class="op">=</span> <span class="dv">10</span></span>
<span id="cb2-3"><a></a>ff_tt_2 <span class="op">=</span> <span class="dv">20</span></span>
<span id="cb2-4"><a></a>ff_tt_3 <span class="op">=</span> <span class="dv">25</span></span>
<span id="cb2-5"><a></a>C1 <span class="op">=</span> <span class="dv">200</span></span>
<span id="cb2-6"><a></a>C2 <span class="op">=</span> <span class="dv">400</span></span>
<span id="cb2-7"><a></a>C3 <span class="op">=</span> <span class="dv">300</span></span>
<span id="cb2-8"><a></a></span>
<span id="cb2-9"><a></a>volume <span class="op">=</span> <span class="dv">1000</span> <span class="co"># veh/hr</span></span>
<span id="cb2-10"><a></a>min_tt <span class="op">=</span> np.<span class="bu">min</span>([ff_tt_1, ff_tt_2, ff_tt_3]) <span class="co"># minimum travel time</span></span>
<span id="cb2-11"><a></a></span>
<span id="cb2-12"><a></a><span class="co"># Define the volumes on each link (1,2, and 3)</span></span>
<span id="cb2-13"><a></a>V1 <span class="op">=</span> volume <span class="cf">if</span> (ff_tt_1<span class="op">==</span>min_tt) <span class="cf">else</span> <span class="dv">0</span></span>
<span id="cb2-14"><a></a>V2 <span class="op">=</span> volume <span class="cf">if</span> (ff_tt_2<span class="op">==</span>min_tt) <span class="cf">else</span> <span class="dv">0</span></span>
<span id="cb2-15"><a></a>V3 <span class="op">=</span> volume <span class="cf">if</span> (ff_tt_3<span class="op">==</span>min_tt) <span class="cf">else</span> <span class="dv">0</span></span>
<span id="cb2-16"><a></a></span>
<span id="cb2-17"><a></a><span class="co"># Define total costs as integrals of travel time costs over volume</span></span>
<span id="cb2-18"><a></a>F1 <span class="op">=</span> ff_tt_1<span class="op">*</span>V1 <span class="op">+</span> ff_tt_1<span class="op">*</span><span class="fl">0.15</span><span class="op">/</span>C1<span class="op">**</span><span class="dv">4</span><span class="op">*</span>V1<span class="op">**</span><span class="dv">5</span><span class="op">/</span><span class="dv">5</span> </span>
<span id="cb2-19"><a></a>F2 <span class="op">=</span> ff_tt_2<span class="op">*</span>V2 <span class="op">+</span> ff_tt_2<span class="op">*</span><span class="fl">0.15</span><span class="op">/</span>C2<span class="op">**</span><span class="dv">4</span><span class="op">*</span>V2<span class="op">**</span><span class="dv">5</span><span class="op">/</span><span class="dv">5</span></span>
<span id="cb2-20"><a></a>F3 <span class="op">=</span> ff_tt_3<span class="op">*</span>V3 <span class="op">+</span> ff_tt_3<span class="op">*</span><span class="fl">0.15</span><span class="op">/</span>C3<span class="op">**</span><span class="dv">4</span><span class="op">*</span>V3<span class="op">**</span><span class="dv">5</span><span class="op">/</span><span class="dv">5</span></span>
<span id="cb2-21"><a></a>F <span class="op">=</span> F1 <span class="op">+</span> F2 <span class="op">+</span> F3</span>
<span id="cb2-22"><a></a></span>
<span id="cb2-23"><a></a>l <span class="op">=</span> <span class="fl">1.0</span> <span class="co"># intialize lambda to 1.0</span></span>
<span id="cb2-24"><a></a>tol <span class="op">=</span> <span class="dv">10</span><span class="op">**-</span><span class="dv">2</span> <span class="co"># tolerance on the difference in total cost between iterations</span></span>
<span id="cb2-25"><a></a></span>
<span id="cb2-26"><a></a>row <span class="op">=</span> [ff_tt_1, ff_tt_2, ff_tt_3, V1, V2, V3, F1, F2, F3, F, l]</span>
<span id="cb2-27"><a></a>df.loc[<span class="bu">len</span>(df),:] <span class="op">=</span> row <span class="co"># add initial values to df</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</section>
<section id="three-route-example---solution-2" class="slide level2 smaller">
<h2>Three Route Example - Solution</h2>
<p>Next we define the Frank-Wolfe algorithm and solve for <span class="math inline">\(\lambda\)</span> using <code>scipy optimize minimize_scalar</code>. The first step is to define a loop that repeatedly calls the minimization on a new set of volumes. We define the Frank-Wolfe algorithm and solve for <span class="math inline">\(\lambda\)</span> using <code>scipy optimize minimize_scalar</code>. The next step is to define the optimization problem. We’ll define the optimization in two functions: <code>get_optimal_vals</code> calculates the various values we need in each iteration and <code>FW_Alg</code> defines the function to be minized by <code>scipy optimize minimize_scalar</code>.</p>
<div class="sourceCode" id="cb3" data-code-line-numbers="26-38|2-4|7-22"><pre class="sourceCode numberSource python number-lines code-with-copy"><code class="sourceCode python"><span id="cb3-1"><a></a><span class="co"># Apply the Frank-Wolfe algorithm on the example dataset</span></span>
<span id="cb3-2"><a></a><span class="kw">def</span> FW_Alg(x, prev_iter):</span>
<span id="cb3-3"><a></a>  f1, f2, f3, V1, V2, V3, F1, F2, F3 <span class="op">=</span> get_optimal_vals(x, prev_iter)</span>
<span id="cb3-4"><a></a>  <span class="cf">return</span> (F1 <span class="op">+</span> F2 <span class="op">+</span> F3)</span>
<span id="cb3-5"><a></a></span>
<span id="cb3-6"><a></a><span class="co"># Function computes the various traffic assignment algorithm values at optimality</span></span>
<span id="cb3-7"><a></a><span class="kw">def</span> get_optimal_vals(x, prev_iter):</span>
<span id="cb3-8"><a></a>  f1 <span class="op">=</span> ff_tt_1<span class="op">*</span>(<span class="dv">1</span><span class="op">+</span><span class="fl">0.15</span><span class="op">*</span>(prev_iter[<span class="st">"V1"</span>]<span class="op">/</span>C1)<span class="op">**</span><span class="dv">4</span>)</span>
<span id="cb3-9"><a></a>  f2 <span class="op">=</span> ff_tt_2<span class="op">*</span>(<span class="dv">1</span><span class="op">+</span><span class="fl">0.15</span><span class="op">*</span>(prev_iter[<span class="st">"V2"</span>]<span class="op">/</span>C2)<span class="op">**</span><span class="dv">4</span>)</span>
<span id="cb3-10"><a></a>  f3 <span class="op">=</span> ff_tt_3<span class="op">*</span>(<span class="dv">1</span><span class="op">+</span><span class="fl">0.15</span><span class="op">*</span>(prev_iter[<span class="st">"V3"</span>]<span class="op">/</span>C3)<span class="op">**</span><span class="dv">4</span>)</span>
<span id="cb3-11"><a></a></span>
<span id="cb3-12"><a></a>  min_tt <span class="op">=</span> np.<span class="bu">min</span>([f1, f2, f3]) <span class="co"># minimum travel time</span></span>
<span id="cb3-13"><a></a></span>
<span id="cb3-14"><a></a>  V1 <span class="op">=</span> x<span class="op">*</span>prev_iter[<span class="st">"V1"</span>] <span class="op">+</span> (<span class="dv">1</span><span class="op">-</span>x)<span class="op">*</span>(volume <span class="cf">if</span> f1<span class="op">==</span>min_tt <span class="cf">else</span> <span class="dv">0</span>)</span>
<span id="cb3-15"><a></a>  V2 <span class="op">=</span> x<span class="op">*</span>prev_iter[<span class="st">"V2"</span>] <span class="op">+</span> (<span class="dv">1</span><span class="op">-</span>x)<span class="op">*</span>(volume <span class="cf">if</span> f2<span class="op">==</span>min_tt <span class="cf">else</span> <span class="dv">0</span>)</span>
<span id="cb3-16"><a></a>  V3 <span class="op">=</span> x<span class="op">*</span>prev_iter[<span class="st">"V3"</span>] <span class="op">+</span> (<span class="dv">1</span><span class="op">-</span>x)<span class="op">*</span>(volume <span class="cf">if</span> f3<span class="op">==</span>min_tt <span class="cf">else</span> <span class="dv">0</span>)</span>
<span id="cb3-17"><a></a></span>
<span id="cb3-18"><a></a>  F1 <span class="op">=</span> ff_tt_1<span class="op">*</span>V1 <span class="op">+</span> ff_tt_1<span class="op">*</span><span class="fl">0.15</span><span class="op">/</span>C1<span class="op">**</span><span class="dv">4</span><span class="op">*</span>V1<span class="op">**</span><span class="dv">5</span><span class="op">/</span><span class="dv">5</span></span>
<span id="cb3-19"><a></a>  F2 <span class="op">=</span> ff_tt_2<span class="op">*</span>V2 <span class="op">+</span> ff_tt_2<span class="op">*</span><span class="fl">0.15</span><span class="op">/</span>C2<span class="op">**</span><span class="dv">4</span><span class="op">*</span>V2<span class="op">**</span><span class="dv">5</span><span class="op">/</span><span class="dv">5</span></span>
<span id="cb3-20"><a></a>  F3 <span class="op">=</span> ff_tt_3<span class="op">*</span>V3 <span class="op">+</span> ff_tt_3<span class="op">*</span><span class="fl">0.15</span><span class="op">/</span>C3<span class="op">**</span><span class="dv">4</span><span class="op">*</span>V3<span class="op">**</span><span class="dv">5</span><span class="op">/</span><span class="dv">5</span></span>
<span id="cb3-21"><a></a></span>
<span id="cb3-22"><a></a>  <span class="cf">return</span> f1, f2, f3, V1, V2, V3, F1, F2, F3</span>
<span id="cb3-23"><a></a></span>
<span id="cb3-24"><a></a>F_diff <span class="op">=</span> F </span>
<span id="cb3-25"><a></a></span>
<span id="cb3-26"><a></a><span class="cf">while</span> F_diff <span class="op">&gt;</span> tol:</span>
<span id="cb3-27"><a></a>  F_diff <span class="op">=</span> F</span>
<span id="cb3-28"><a></a>  prev_iter <span class="op">=</span> df.iloc[<span class="op">-</span><span class="dv">1</span>] <span class="co"># Get the values from the last iteration</span></span>
<span id="cb3-29"><a></a></span>
<span id="cb3-30"><a></a>  res <span class="op">=</span> minimize_scalar(FW_Alg, args<span class="op">=</span>(prev_iter), bounds<span class="op">=</span>[<span class="dv">0</span>,<span class="dv">1</span>])</span>
<span id="cb3-31"><a></a>  F <span class="op">=</span> res.fun</span>
<span id="cb3-32"><a></a>  l <span class="op">=</span> res.x</span>
<span id="cb3-33"><a></a>  f1, f2, f3, V1, V2, V3, F1, F2, F3 <span class="op">=</span> get_optimal_vals(l, prev_iter)</span>
<span id="cb3-34"><a></a></span>
<span id="cb3-35"><a></a>  row <span class="op">=</span> [f1, f2, f3, V1, V2, V3, F1, F2, F3, F, l]</span>
<span id="cb3-36"><a></a>  df.loc[<span class="bu">len</span>(df),:] <span class="op">=</span> row</span>
<span id="cb3-37"><a></a></span>
<span id="cb3-38"><a></a>  F_diff <span class="op">=</span> F_diff <span class="op">-</span> F</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</section>
<section id="three-route-example---solution-3" class="slide level2 smaller">
<h2>Three Route Example - Solution</h2>
<p>Putting everything together, we can print a table summarizing the variable values at each iteration.</p>
<div id="dee509f0" class="cell" data-execution_count="1">
<div class="cell-output cell-output-display" data-execution_count="1">
<style type="text/css">
#T_700d9_row0_col0, #T_700d9_row0_col1, #T_700d9_row0_col2, #T_700d9_row0_col3, #T_700d9_row0_col4, #T_700d9_row0_col5, #T_700d9_row0_col6, #T_700d9_row0_col7, #T_700d9_row0_col8, #T_700d9_row0_col9, #T_700d9_row0_col10, #T_700d9_row1_col0, #T_700d9_row1_col1, #T_700d9_row1_col2, #T_700d9_row1_col3, #T_700d9_row1_col4, #T_700d9_row1_col5, #T_700d9_row1_col6, #T_700d9_row1_col7, #T_700d9_row1_col8, #T_700d9_row1_col9, #T_700d9_row1_col10, #T_700d9_row2_col0, #T_700d9_row2_col1, #T_700d9_row2_col2, #T_700d9_row2_col3, #T_700d9_row2_col4, #T_700d9_row2_col5, #T_700d9_row2_col6, #T_700d9_row2_col7, #T_700d9_row2_col8, #T_700d9_row2_col9, #T_700d9_row2_col10, #T_700d9_row3_col0, #T_700d9_row3_col1, #T_700d9_row3_col2, #T_700d9_row3_col3, #T_700d9_row3_col4, #T_700d9_row3_col5, #T_700d9_row3_col6, #T_700d9_row3_col7, #T_700d9_row3_col8, #T_700d9_row3_col9, #T_700d9_row3_col10, #T_700d9_row4_col0, #T_700d9_row4_col1, #T_700d9_row4_col2, #T_700d9_row4_col3, #T_700d9_row4_col4, #T_700d9_row4_col5, #T_700d9_row4_col6, #T_700d9_row4_col7, #T_700d9_row4_col8, #T_700d9_row4_col9, #T_700d9_row4_col10, #T_700d9_row5_col0, #T_700d9_row5_col1, #T_700d9_row5_col2, #T_700d9_row5_col3, #T_700d9_row5_col4, #T_700d9_row5_col5, #T_700d9_row5_col6, #T_700d9_row5_col7, #T_700d9_row5_col8, #T_700d9_row5_col9, #T_700d9_row5_col10, #T_700d9_row6_col0, #T_700d9_row6_col1, #T_700d9_row6_col2, #T_700d9_row6_col3, #T_700d9_row6_col4, #T_700d9_row6_col5, #T_700d9_row6_col6, #T_700d9_row6_col7, #T_700d9_row6_col8, #T_700d9_row6_col9, #T_700d9_row6_col10, #T_700d9_row7_col0, #T_700d9_row7_col1, #T_700d9_row7_col2, #T_700d9_row7_col3, #T_700d9_row7_col4, #T_700d9_row7_col5, #T_700d9_row7_col6, #T_700d9_row7_col7, #T_700d9_row7_col8, #T_700d9_row7_col9, #T_700d9_row7_col10 {
  font-size: 20pt;
}
</style>

<table id="T_700d9" class="caption-top" data-quarto-postprocess="true">
<thead>
<tr class="header">
<th class="blank level0" data-quarto-table-cell-role="th">&nbsp;</th>
<th id="T_700d9_level0_col0" class="col_heading level0 col0" data-quarto-table-cell-role="th">f1</th>
<th id="T_700d9_level0_col1" class="col_heading level0 col1" data-quarto-table-cell-role="th">f2</th>
<th id="T_700d9_level0_col2" class="col_heading level0 col2" data-quarto-table-cell-role="th">f3</th>
<th id="T_700d9_level0_col3" class="col_heading level0 col3" data-quarto-table-cell-role="th">V1</th>
<th id="T_700d9_level0_col4" class="col_heading level0 col4" data-quarto-table-cell-role="th">V2</th>
<th id="T_700d9_level0_col5" class="col_heading level0 col5" data-quarto-table-cell-role="th">V3</th>
<th id="T_700d9_level0_col6" class="col_heading level0 col6" data-quarto-table-cell-role="th">F1</th>
<th id="T_700d9_level0_col7" class="col_heading level0 col7" data-quarto-table-cell-role="th">F2</th>
<th id="T_700d9_level0_col8" class="col_heading level0 col8" data-quarto-table-cell-role="th">F3</th>
<th id="T_700d9_level0_col9" class="col_heading level0 col9" data-quarto-table-cell-role="th">F</th>
<th id="T_700d9_level0_col10" class="col_heading level0 col10" data-quarto-table-cell-role="th">lambda</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td id="T_700d9_level0_row0" class="row_heading level0 row0" data-quarto-table-cell-role="th">0</td>
<td id="T_700d9_row0_col0" class="data row0 col0">10.00</td>
<td id="T_700d9_row0_col1" class="data row0 col1">20.00</td>
<td id="T_700d9_row0_col2" class="data row0 col2">25.00</td>
<td id="T_700d9_row0_col3" class="data row0 col3">1000.00</td>
<td id="T_700d9_row0_col4" class="data row0 col4">0.00</td>
<td id="T_700d9_row0_col5" class="data row0 col5">0.00</td>
<td id="T_700d9_row0_col6" class="data row0 col6">197500.00</td>
<td id="T_700d9_row0_col7" class="data row0 col7">0.00</td>
<td id="T_700d9_row0_col8" class="data row0 col8">0.00</td>
<td id="T_700d9_row0_col9" class="data row0 col9">197500.00</td>
<td id="T_700d9_row0_col10" class="data row0 col10">1.00</td>
</tr>
<tr class="even">
<td id="T_700d9_level0_row1" class="row_heading level0 row1" data-quarto-table-cell-role="th">1</td>
<td id="T_700d9_row1_col0" class="data row1 col0">947.50</td>
<td id="T_700d9_row1_col1" class="data row1 col1">20.00</td>
<td id="T_700d9_row1_col2" class="data row1 col2">25.00</td>
<td id="T_700d9_row1_col3" class="data row1 col3">403.46</td>
<td id="T_700d9_row1_col4" class="data row1 col4">596.54</td>
<td id="T_700d9_row1_col5" class="data row1 col5">0.00</td>
<td id="T_700d9_row1_col6" class="data row1 col6">6039.00</td>
<td id="T_700d9_row1_col7" class="data row1 col7">13701.45</td>
<td id="T_700d9_row1_col8" class="data row1 col8">0.00</td>
<td id="T_700d9_row1_col9" class="data row1 col9">19740.44</td>
<td id="T_700d9_row1_col10" class="data row1 col10">0.40</td>
</tr>
<tr class="odd">
<td id="T_700d9_level0_row2" class="row_heading level0 row2" data-quarto-table-cell-role="th">2</td>
<td id="T_700d9_row2_col0" class="data row2 col0">34.84</td>
<td id="T_700d9_row2_col1" class="data row2 col1">34.84</td>
<td id="T_700d9_row2_col2" class="data row2 col2">25.00</td>
<td id="T_700d9_row2_col3" class="data row2 col3">338.45</td>
<td id="T_700d9_row2_col4" class="data row2 col4">500.42</td>
<td id="T_700d9_row2_col5" class="data row2 col5">161.13</td>
<td id="T_700d9_row2_col6" class="data row2 col6">4217.09</td>
<td id="T_700d9_row2_col7" class="data row2 col7">10743.87</td>
<td id="T_700d9_row2_col8" class="data row2 col8">4038.43</td>
<td id="T_700d9_row2_col9" class="data row2 col9">18999.39</td>
<td id="T_700d9_row2_col10" class="data row2 col10">0.84</td>
</tr>
<tr class="even">
<td id="T_700d9_level0_row3" class="row_heading level0 row3" data-quarto-table-cell-role="th">3</td>
<td id="T_700d9_row3_col0" class="data row3 col0">22.30</td>
<td id="T_700d9_row3_col1" class="data row3 col1">27.35</td>
<td id="T_700d9_row3_col2" class="data row3 col2">25.31</td>
<td id="T_700d9_row3_col3" class="data row3 col3">361.97</td>
<td id="T_700d9_row3_col4" class="data row3 col4">482.63</td>
<td id="T_700d9_row3_col5" class="data row3 col5">155.41</td>
<td id="T_700d9_row3_col6" class="data row3 col6">4784.70</td>
<td id="T_700d9_row3_col7" class="data row3 col7">10266.28</td>
<td id="T_700d9_row3_col8" class="data row3 col8">3893.55</td>
<td id="T_700d9_row3_col9" class="data row3 col9">18944.53</td>
<td id="T_700d9_row3_col10" class="data row3 col10">0.96</td>
</tr>
<tr class="odd">
<td id="T_700d9_level0_row4" class="row_heading level0 row4" data-quarto-table-cell-role="th">4</td>
<td id="T_700d9_row4_col0" class="data row4 col0">26.09</td>
<td id="T_700d9_row4_col1" class="data row4 col1">26.36</td>
<td id="T_700d9_row4_col2" class="data row4 col2">25.27</td>
<td id="T_700d9_row4_col3" class="data row4 col3">354.58</td>
<td id="T_700d9_row4_col4" class="data row4 col4">472.78</td>
<td id="T_700d9_row4_col5" class="data row4 col5">172.64</td>
<td id="T_700d9_row4_col6" class="data row4 col6">4596.77</td>
<td id="T_700d9_row4_col7" class="data row4 col7">10009.25</td>
<td id="T_700d9_row4_col8" class="data row4 col8">4330.12</td>
<td id="T_700d9_row4_col9" class="data row4 col9">18936.14</td>
<td id="T_700d9_row4_col10" class="data row4 col10">0.98</td>
</tr>
<tr class="even">
<td id="T_700d9_level0_row5" class="row_heading level0 row5" data-quarto-table-cell-role="th">5</td>
<td id="T_700d9_row5_col0" class="data row5 col0">24.82</td>
<td id="T_700d9_row5_col1" class="data row5 col1">25.85</td>
<td id="T_700d9_row5_col2" class="data row5 col2">25.41</td>
<td id="T_700d9_row5_col3" class="data row5 col3">359.22</td>
<td id="T_700d9_row5_col4" class="data row5 col4">469.38</td>
<td id="T_700d9_row5_col5" class="data row5 col5">171.40</td>
<td id="T_700d9_row5_col6" class="data row5 col6">4713.80</td>
<td id="T_700d9_row5_col7" class="data row5 col7">9921.62</td>
<td id="T_700d9_row5_col8" class="data row5 col8">4298.58</td>
<td id="T_700d9_row5_col9" class="data row5 col9">18934.00</td>
<td id="T_700d9_row5_col10" class="data row5 col10">0.99</td>
</tr>
<tr class="odd">
<td id="T_700d9_level0_row6" class="row_heading level0 row6" data-quarto-table-cell-role="th">6</td>
<td id="T_700d9_row6_col0" class="data row6 col0">25.61</td>
<td id="T_700d9_row6_col1" class="data row6 col1">25.69</td>
<td id="T_700d9_row6_col2" class="data row6 col2">25.40</td>
<td id="T_700d9_row6_col3" class="data row6 col3">357.30</td>
<td id="T_700d9_row6_col4" class="data row6 col4">466.87</td>
<td id="T_700d9_row6_col5" class="data row6 col5">175.83</td>
<td id="T_700d9_row6_col6" class="data row6 col6">4664.85</td>
<td id="T_700d9_row6_col7" class="data row6 col7">9857.20</td>
<td id="T_700d9_row6_col8" class="data row6 col8">4411.38</td>
<td id="T_700d9_row6_col9" class="data row6 col9">18933.43</td>
<td id="T_700d9_row6_col10" class="data row6 col10">0.99</td>
</tr>
<tr class="even">
<td id="T_700d9_level0_row7" class="row_heading level0 row7" data-quarto-table-cell-role="th">7</td>
<td id="T_700d9_row7_col0" class="data row7 col0">25.28</td>
<td id="T_700d9_row7_col1" class="data row7 col1">25.57</td>
<td id="T_700d9_row7_col2" class="data row7 col2">25.44</td>
<td id="T_700d9_row7_col3" class="data row7 col3">358.58</td>
<td id="T_700d9_row7_col4" class="data row7 col4">465.93</td>
<td id="T_700d9_row7_col5" class="data row7 col5">175.48</td>
<td id="T_700d9_row7_col6" class="data row7 col6">4697.45</td>
<td id="T_700d9_row7_col7" class="data row7 col7">9833.37</td>
<td id="T_700d9_row7_col8" class="data row7 col8">4402.44</td>
<td id="T_700d9_row7_col9" class="data row7 col9">18933.27</td>
<td id="T_700d9_row7_col10" class="data row7 col10">1.00</td>
</tr>
</tbody>
</table>
</div>
</div>
</section>
<section id="transit-assignment" class="slide level2">
<h2>Transit Assignment</h2>
<ul>
<li>Transit assignment not usually a function of congestion</li>
<li>Procedures typically used:
<ul>
<li>All-Or-Nothing</li>
<li>Stochastic (multipath)</li>
</ul></li>
<li>Must account for:
<ul>
<li>Walk access/egress times</li>
<li>Waiting times as f(headway)</li>
<li>Transfers
<ul>
<li>Feasible transfer points</li>
<li>Transfer times</li>
</ul></li>
</ul></li>
</ul>

<div class="quarto-auto-generated-content">
<p><img src="../images/logo.png" class="slide-logo"></p>
<div class="footer footer-default">
<p><a href="../../..\teaching/ENCI707/">ENCI707 Home</a></p>
</div>
</div>
</section>
    </div>
  </div>

  <script>window.backupDefine = window.define; window.define = undefined;</script>
  <script src="../../../site_libs/revealjs/dist/reveal.js"></script>
  <!-- reveal.js plugins -->
  <script src="../../../site_libs/revealjs/plugin/quarto-line-highlight/line-highlight.js"></script>
  <script src="../../../site_libs/revealjs/plugin/pdf-export/pdfexport.js"></script>
  <script src="../../../site_libs/revealjs/plugin/reveal-menu/menu.js"></script>
  <script src="../../../site_libs/revealjs/plugin/reveal-menu/quarto-menu.js"></script>
  <script src="../../../site_libs/revealjs/plugin/reveal-chalkboard/plugin.js"></script>
  <script src="../../../site_libs/revealjs/plugin/quarto-support/support.js"></script>
  

  <script src="../../../site_libs/revealjs/plugin/notes/notes.js"></script>
  <script src="../../../site_libs/revealjs/plugin/search/search.js"></script>
  <script src="../../../site_libs/revealjs/plugin/zoom/zoom.js"></script>
  <script src="../../../site_libs/revealjs/plugin/math/math.js"></script>
  <script>window.define = window.backupDefine; window.backupDefine = undefined;</script>

  <script>

      // Full list of configuration options available at:
      // https://revealjs.com/config/
      Reveal.initialize({
'controlsAuto': true,
'previewLinksAuto': false,
'pdfSeparateFragments': false,
'autoAnimateEasing': "ease",
'autoAnimateDuration': 1,
'autoAnimateUnmatched': true,
'menu': {"side":"left","useTextContentForMissingTitles":true,"markers":false,"loadIcons":false,"custom":[{"title":"Tools","icon":"<i class=\"fas fa-gear\"></i>","content":"<ul class=\"slide-menu-items\">\n<li class=\"slide-tool-item active\" data-item=\"0\"><a href=\"#\" onclick=\"RevealMenuToolHandlers.fullscreen(event)\"><kbd>f</kbd> Fullscreen</a></li>\n<li class=\"slide-tool-item\" data-item=\"1\"><a href=\"#\" onclick=\"RevealMenuToolHandlers.speakerMode(event)\"><kbd>s</kbd> Speaker View</a></li>\n<li class=\"slide-tool-item\" data-item=\"2\"><a href=\"#\" onclick=\"RevealMenuToolHandlers.overview(event)\"><kbd>o</kbd> Slide Overview</a></li>\n<li class=\"slide-tool-item\" data-item=\"3\"><a href=\"#\" onclick=\"RevealMenuToolHandlers.togglePdfExport(event)\"><kbd>e</kbd> PDF Export Mode</a></li>\n<li class=\"slide-tool-item\" data-item=\"4\"><a href=\"#\" onclick=\"RevealMenuToolHandlers.toggleChalkboard(event)\"><kbd>b</kbd> Toggle Chalkboard</a></li>\n<li class=\"slide-tool-item\" data-item=\"5\"><a href=\"#\" onclick=\"RevealMenuToolHandlers.toggleNotesCanvas(event)\"><kbd>c</kbd> Toggle Notes Canvas</a></li>\n<li class=\"slide-tool-item\" data-item=\"6\"><a href=\"#\" onclick=\"RevealMenuToolHandlers.downloadDrawings(event)\"><kbd>d</kbd> Download Drawings</a></li>\n<li class=\"slide-tool-item\" data-item=\"7\"><a href=\"#\" onclick=\"RevealMenuToolHandlers.keyboardHelp(event)\"><kbd>?</kbd> Keyboard Help</a></li>\n</ul>"}],"openButton":true},
'chalkboard': {"buttons":true},
'smaller': false,
 
        // Display controls in the bottom right corner
        controls: false,

        // Help the user learn the controls by providing hints, for example by
        // bouncing the down arrow when they first encounter a vertical slide
        controlsTutorial: false,

        // Determines where controls appear, "edges" or "bottom-right"
        controlsLayout: 'edges',

        // Visibility rule for backwards navigation arrows; "faded", "hidden"
        // or "visible"
        controlsBackArrows: 'faded',

        // Display a presentation progress bar
        progress: true,

        // Display the page number of the current slide
        slideNumber: 'c/t',

        // 'all', 'print', or 'speaker'
        showSlideNumber: 'all',

        // Add the current slide number to the URL hash so that reloading the
        // page/copying the URL will return you to the same slide
        hash: true,

        // Start with 1 for the hash rather than 0
        hashOneBasedIndex: false,

        // Flags if we should monitor the hash and change slides accordingly
        respondToHashChanges: true,

        // Push each slide change to the browser history
        history: true,

        // Enable keyboard shortcuts for navigation
        keyboard: true,

        // Enable the slide overview mode
        overview: true,

        // Disables the default reveal.js slide layout (scaling and centering)
        // so that you can use custom CSS layout
        disableLayout: false,

        // Vertical centering of slides
        center: false,

        // Enables touch navigation on devices with touch input
        touch: true,

        // Loop the presentation
        loop: false,

        // Change the presentation direction to be RTL
        rtl: false,

        // see https://revealjs.com/vertical-slides/#navigation-mode
        navigationMode: 'linear',

        // Randomizes the order of slides each time the presentation loads
        shuffle: false,

        // Turns fragments on and off globally
        fragments: true,

        // Flags whether to include the current fragment in the URL,
        // so that reloading brings you to the same fragment position
        fragmentInURL: false,

        // Flags if the presentation is running in an embedded mode,
        // i.e. contained within a limited portion of the screen
        embedded: false,

        // Flags if we should show a help overlay when the questionmark
        // key is pressed
        help: true,

        // Flags if it should be possible to pause the presentation (blackout)
        pause: true,

        // Flags if speaker notes should be visible to all viewers
        showNotes: false,

        // Global override for autoplaying embedded media (null/true/false)
        autoPlayMedia: null,

        // Global override for preloading lazy-loaded iframes (null/true/false)
        preloadIframes: null,

        // Number of milliseconds between automatically proceeding to the
        // next slide, disabled when set to 0, this value can be overwritten
        // by using a data-autoslide attribute on your slides
        autoSlide: 0,

        // Stop auto-sliding after user input
        autoSlideStoppable: true,

        // Use this method for navigation when auto-sliding
        autoSlideMethod: null,

        // Specify the average time in seconds that you think you will spend
        // presenting each slide. This is used to show a pacing timer in the
        // speaker view
        defaultTiming: null,

        // Enable slide navigation via mouse wheel
        mouseWheel: false,

        // The display mode that will be used to show slides
        display: 'block',

        // Hide cursor if inactive
        hideInactiveCursor: true,

        // Time before the cursor is hidden (in ms)
        hideCursorTime: 5000,

        // Opens links in an iframe preview overlay
        previewLinks: false,

        // Transition style (none/fade/slide/convex/concave/zoom)
        transition: 'fade',

        // Transition speed (default/fast/slow)
        transitionSpeed: 'default',

        // Transition style for full page slide backgrounds
        // (none/fade/slide/convex/concave/zoom)
        backgroundTransition: 'none',

        // Number of slides away from the current that are visible
        viewDistance: 3,

        // Number of slides away from the current that are visible on mobile
        // devices. It is advisable to set this to a lower number than
        // viewDistance in order to save resources.
        mobileViewDistance: 2,

        // The "normal" size of the presentation, aspect ratio will be preserved
        // when the presentation is scaled to fit different resolutions. Can be
        // specified using percentage units.
        width: 1050,

        height: 700,

        // Factor of the display size that should remain empty around the content
        margin: 0.1,

        math: {
          mathjax: 'https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.0/MathJax.js',
          config: 'TeX-AMS_HTML-full',
          tex2jax: {
            inlineMath: [['\\(','\\)']],
            displayMath: [['\\[','\\]']],
            balanceBraces: true,
            processEscapes: false,
            processRefs: true,
            processEnvironments: true,
            preview: 'TeX',
            skipTags: ['script','noscript','style','textarea','pre','code'],
            ignoreClass: 'tex2jax_ignore',
            processClass: 'tex2jax_process'
          },
        },

        // reveal.js plugins
        plugins: [QuartoLineHighlight, PdfExport, RevealMenu, RevealChalkboard, QuartoSupport,

          RevealMath,
          RevealNotes,
          RevealSearch,
          RevealZoom
        ]
      });
    </script>
    <script id="quarto-html-after-body" type="application/javascript">
    window.document.addEventListener("DOMContentLoaded", function (event) {
      const toggleBodyColorMode = (bsSheetEl) => {
        const mode = bsSheetEl.getAttribute("data-mode");
        const bodyEl = window.document.querySelector("body");
        if (mode === "dark") {
          bodyEl.classList.add("quarto-dark");
          bodyEl.classList.remove("quarto-light");
        } else {
          bodyEl.classList.add("quarto-light");
          bodyEl.classList.remove("quarto-dark");
        }
      }
      const toggleBodyColorPrimary = () => {
        const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
        if (bsSheetEl) {
          toggleBodyColorMode(bsSheetEl);
        }
      }
      toggleBodyColorPrimary();  
      const tabsets =  window.document.querySelectorAll(".panel-tabset-tabby")
      tabsets.forEach(function(tabset) {
        const tabby = new Tabby('#' + tabset.id);
      });
      const isCodeAnnotation = (el) => {
        for (const clz of el.classList) {
          if (clz.startsWith('code-annotation-')) {                     
            return true;
          }
        }
        return false;
      }
      const onCopySuccess = function(e) {
        // button target
        const button = e.trigger;
        // don't keep focus
        button.blur();
        // flash "checked"
        button.classList.add('code-copy-button-checked');
        var currentTitle = button.getAttribute("title");
        button.setAttribute("title", "Copied!");
        let tooltip;
        if (window.bootstrap) {
          button.setAttribute("data-bs-toggle", "tooltip");
          button.setAttribute("data-bs-placement", "left");
          button.setAttribute("data-bs-title", "Copied!");
          tooltip = new bootstrap.Tooltip(button, 
            { trigger: "manual", 
              customClass: "code-copy-button-tooltip",
              offset: [0, -8]});
          tooltip.show();    
        }
        setTimeout(function() {
          if (tooltip) {
            tooltip.hide();
            button.removeAttribute("data-bs-title");
            button.removeAttribute("data-bs-toggle");
            button.removeAttribute("data-bs-placement");
          }
          button.setAttribute("title", currentTitle);
          button.classList.remove('code-copy-button-checked');
        }, 1000);
        // clear code selection
        e.clearSelection();
      }
      const getTextToCopy = function(trigger) {
          const codeEl = trigger.previousElementSibling.cloneNode(true);
          for (const childEl of codeEl.children) {
            if (isCodeAnnotation(childEl)) {
              childEl.remove();
            }
          }
          return codeEl.innerText;
      }
      const clipboard = new window.ClipboardJS('.code-copy-button:not([data-in-quarto-modal])', {
        text: getTextToCopy
      });
      clipboard.on('success', onCopySuccess);
      if (window.document.getElementById('quarto-embedded-source-code-modal')) {
        // For code content inside modals, clipBoardJS needs to be initialized with a container option
        // TODO: Check when it could be a function (https://github.com/zenorocha/clipboard.js/issues/860)
        const clipboardModal = new window.ClipboardJS('.code-copy-button[data-in-quarto-modal]', {
          text: getTextToCopy,
          container: window.document.getElementById('quarto-embedded-source-code-modal')
        });
        clipboardModal.on('success', onCopySuccess);
      }
        var localhostRegex = new RegExp(/^(?:http|https):\/\/localhost\:?[0-9]*\//);
        var mailtoRegex = new RegExp(/^mailto:/);
          var filterRegex = new RegExp("https:\/\/Hawkins-TECH-Lab\.github\.io\/hawkins-tech-lab\.github\.io\/");
        var isInternal = (href) => {
            return filterRegex.test(href) || localhostRegex.test(href) || mailtoRegex.test(href);
        }
        // Inspect non-navigation links and adorn them if external
     	var links = window.document.querySelectorAll('a[href]:not(.nav-link):not(.navbar-brand):not(.toc-action):not(.sidebar-link):not(.sidebar-item-toggle):not(.pagination-link):not(.no-external):not([aria-hidden]):not(.dropdown-item):not(.quarto-navigation-tool):not(.about-link)');
        for (var i=0; i<links.length; i++) {
          const link = links[i];
          if (!isInternal(link.href)) {
            // undo the damage that might have been done by quarto-nav.js in the case of
            // links that we want to consider external
            if (link.dataset.originalHref !== undefined) {
              link.href = link.dataset.originalHref;
            }
          }
        }
      function tippyHover(el, contentFn, onTriggerFn, onUntriggerFn) {
        const config = {
          allowHTML: true,
          maxWidth: 500,
          delay: 100,
          arrow: false,
          appendTo: function(el) {
              return el.closest('section.slide') || el.parentElement;
          },
          interactive: true,
          interactiveBorder: 10,
          theme: 'light-border',
          placement: 'bottom-start',
        };
        if (contentFn) {
          config.content = contentFn;
        }
        if (onTriggerFn) {
          config.onTrigger = onTriggerFn;
        }
        if (onUntriggerFn) {
          config.onUntrigger = onUntriggerFn;
        }
          config['offset'] = [0,0];
          config['maxWidth'] = 700;
        window.tippy(el, config); 
      }
      const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
      for (var i=0; i<noterefs.length; i++) {
        const ref = noterefs[i];
        tippyHover(ref, function() {
          // use id or data attribute instead here
          let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
          try { href = new URL(href).hash; } catch {}
          const id = href.replace(/^#\/?/, "");
          const note = window.document.getElementById(id);
          if (note) {
            return note.innerHTML;
          } else {
            return "";
          }
        });
      }
      const findCites = (el) => {
        const parentEl = el.parentElement;
        if (parentEl) {
          const cites = parentEl.dataset.cites;
          if (cites) {
            return {
              el,
              cites: cites.split(' ')
            };
          } else {
            return findCites(el.parentElement)
          }
        } else {
          return undefined;
        }
      };
      var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
      for (var i=0; i<bibliorefs.length; i++) {
        const ref = bibliorefs[i];
        const citeInfo = findCites(ref);
        if (citeInfo) {
          tippyHover(citeInfo.el, function() {
            var popup = window.document.createElement('div');
            citeInfo.cites.forEach(function(cite) {
              var citeDiv = window.document.createElement('div');
              citeDiv.classList.add('hanging-indent');
              citeDiv.classList.add('csl-entry');
              var biblioDiv = window.document.getElementById('ref-' + cite);
              if (biblioDiv) {
                citeDiv.innerHTML = biblioDiv.innerHTML;
              }
              popup.appendChild(citeDiv);
            });
            return popup.innerHTML;
          });
        }
      }
    });
    </script>
    

</body></html>