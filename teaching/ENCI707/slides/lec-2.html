<!DOCTYPE html>
<html lang="en"><head>
<script src="../../../site_libs/clipboard/clipboard.min.js"></script>
<script src="../../../site_libs/quarto-html/tabby.min.js"></script>
<script src="../../../site_libs/quarto-html/popper.min.js"></script>
<script src="../../../site_libs/quarto-html/tippy.umd.min.js"></script>
<link href="../../../site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="../../../site_libs/quarto-html/light-border.css" rel="stylesheet">
<link href="../../../site_libs/quarto-html/quarto-syntax-highlighting-e26003cea8cd680ca0c55a263523d882.css" rel="stylesheet" id="quarto-text-highlighting-styles"><meta charset="utf-8">
  <meta name="generator" content="quarto-1.6.39">

  <title>Hawkinslab – Lecture 2 - Surveys</title>
  <meta name="apple-mobile-web-app-capable" content="yes">
  <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, minimal-ui">
  <link rel="stylesheet" href="../../../site_libs/revealjs/dist/reset.css">
  <link rel="stylesheet" href="../../../site_libs/revealjs/dist/reveal.css">
  <style>
    code{white-space: pre-wrap;}
    span.smallcaps{font-variant: small-caps;}
    div.columns{display: flex; gap: min(4vw, 1.5em);}
    div.column{flex: auto; overflow-x: auto;}
    div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
    ul.task-list{list-style: none;}
    ul.task-list li input[type="checkbox"] {
      width: 0.8em;
      margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
      vertical-align: middle;
    }
  </style>
  <link rel="stylesheet" href="../../../site_libs/revealjs/dist/theme/quarto-423d414d36ce366a9d05f36d06304417.css">
  <link href="../../../site_libs/revealjs/plugin/quarto-line-highlight/line-highlight.css" rel="stylesheet">
  <link href="../../../site_libs/revealjs/plugin/reveal-menu/menu.css" rel="stylesheet">
  <link href="../../../site_libs/revealjs/plugin/reveal-menu/quarto-menu.css" rel="stylesheet">
  <link href="../../../site_libs/revealjs/plugin/reveal-chalkboard/font-awesome/css/all.css" rel="stylesheet">
  <link href="../../../site_libs/revealjs/plugin/reveal-chalkboard/style.css" rel="stylesheet">
  <link href="../../../site_libs/revealjs/plugin/quarto-support/footer.css" rel="stylesheet">
  <style type="text/css">
    .reveal div.sourceCode {
      margin: 0;
      overflow: auto;
    }
    .reveal div.hanging-indent {
      margin-left: 1em;
      text-indent: -1em;
    }
    .reveal .slide:not(.center) {
      height: 100%;
    }
    .reveal .slide.scrollable {
      overflow-y: auto;
    }
    .reveal .footnotes {
      height: 100%;
      overflow-y: auto;
    }
    .reveal .slide .absolute {
      position: absolute;
      display: block;
    }
    .reveal .footnotes ol {
      counter-reset: ol;
      list-style-type: none; 
      margin-left: 0;
    }
    .reveal .footnotes ol li:before {
      counter-increment: ol;
      content: counter(ol) ". "; 
    }
    .reveal .footnotes ol li > p:first-child {
      display: inline-block;
    }
    .reveal .slide ul,
    .reveal .slide ol {
      margin-bottom: 0.5em;
    }
    .reveal .slide ul li,
    .reveal .slide ol li {
      margin-top: 0.4em;
      margin-bottom: 0.2em;
    }
    .reveal .slide ul[role="tablist"] li {
      margin-bottom: 0;
    }
    .reveal .slide ul li > *:first-child,
    .reveal .slide ol li > *:first-child {
      margin-block-start: 0;
    }
    .reveal .slide ul li > *:last-child,
    .reveal .slide ol li > *:last-child {
      margin-block-end: 0;
    }
    .reveal .slide .columns:nth-child(3) {
      margin-block-start: 0.8em;
    }
    .reveal blockquote {
      box-shadow: none;
    }
    .reveal .tippy-content>* {
      margin-top: 0.2em;
      margin-bottom: 0.7em;
    }
    .reveal .tippy-content>*:last-child {
      margin-bottom: 0.2em;
    }
    .reveal .slide > img.stretch.quarto-figure-center,
    .reveal .slide > img.r-stretch.quarto-figure-center {
      display: block;
      margin-left: auto;
      margin-right: auto; 
    }
    .reveal .slide > img.stretch.quarto-figure-left,
    .reveal .slide > img.r-stretch.quarto-figure-left  {
      display: block;
      margin-left: 0;
      margin-right: auto; 
    }
    .reveal .slide > img.stretch.quarto-figure-right,
    .reveal .slide > img.r-stretch.quarto-figure-right  {
      display: block;
      margin-left: auto;
      margin-right: 0; 
    }
  </style>
</head>
<body class="quarto-light">
  <div class="reveal">
    <div class="slides">

<section id="title-slide" class="quarto-title-block center">
  <h1 class="title">Lecture 2 - Surveys</h1>
  <p class="subtitle">ENCI707: Engineering Demand and Policy Analysis</p>

<div class="quarto-title-authors">
</div>

</section>
<section id="outline" class="slide level2">
<h2>Outline</h2>
<div>
<ol type="1">
<li class="fragment">Survey terms</li>
<li class="fragment">Survey design</li>
<li class="fragment">Stated choice experiments</li>
</ol>
</div>
</section>
<section>
<section id="survey-terms" class="title-slide slide level1 center">
<h1>Survey Terms</h1>

</section>
<section id="infrastructure-demand-surveys" class="slide level2">
<h2>Infrastructure Demand &amp; Surveys</h2>
<ul>
<li>Infrastructure demand is a function of individual decisions</li>
<li>Analysis requires behavioral data: surveys!​</li>
<li>As with other forms of engineering analysis, survey experiments require careful design &amp; execution</li>
<li>A demand analyst must be an expert in both the subject area &amp; knowledgeable about survey methods</li>
</ul>
</section>
<section id="survey-jargon" class="slide level2 smaller">
<h2>Survey Jargon</h2>
<ul>
<li><strong>Observation unit</strong>: basic unit of measurement. In human populations, it is often individuals.​</li>
<li><strong>Target population</strong>: The complete set of observations we want to study. E.g., university students, seniors, or adults with a driver’s license.​</li>
<li><strong>Sample</strong>: A subset of the population.​</li>
<li><strong>Sampled population</strong>: The collection of all possible observation units that might have been chosen in a sample. E.g., Canada or Alberta.​</li>
<li><strong>Sampling unit</strong>: A unit that can be selected from a sample. Often, we are interested in individuals but sample households.​</li>
<li><strong>Sampling frame</strong>: A list, map, or other specification of sampling units in the population from which the sample may be chosen. E.g., all residential telephone numbers in a city.​</li>
</ul>
</section>
<section id="requirements-of-a-good-survey" class="slide level2 smaller">
<h2>Requirements of a Good Survey</h2>
<ul>
<li><strong>Representative:</strong> does the sample represent the <strong>population of interest</strong>?</li>
<li><strong>Example</strong> Target vs.&nbsp;sample population for a telephone survey of likely voters
<ul>
<li>Not all households have telephones: as of 2021 93.9% of Canadian households had cellphones &amp; 47.4% had a landline</li>
<li>Not all <strong>households with telephones</strong> are eligible to vote</li>
<li>Some <strong>eligible respondents</strong> in the sample frame cannot be contacted, refuse to respond, or are ill</li>
</ul></li>
</ul>

<img data-src="../../../assets/images/teaching/ENCI707/Lecture2/sample_frame.svg" class="quarto-figure quarto-figure-center r-stretch"></section>
<section id="applications-outside-home-subject-surveys" class="slide level2 smaller">
<h2>Applications Outside Home-Subject Surveys</h2>
<ul>
<li>National Pesticide Survey, conducted by EPA, studied <strong>pesticides &amp; nitrates in drinking water wells US-wide​</strong>
<ul>
<li><strong>Target population</strong>: All community water systems &amp; rural domestic wells in the US​</li>
<li><strong>Sampled population</strong>: All community water systems (as listed in Federal Reporting Data System) &amp; all identifiable domestic wells willing to participate in survey​</li>
<li>How do we define <strong>identifiable</strong>?​</li>
<li>Do we expect a different <strong>response rate</strong> between <strong>community systems</strong> &amp; <strong>domestic well owners</strong>?</li>
</ul></li>
</ul>
</section>
<section id="selection-bias" class="slide level2 smaller">
<h2>Selection Bias</h2>
<ul>
<li>Occurs when some part of the target population is sampled at a <strong>different rate</strong> than its appearance in the population​
<ul>
<li><strong>Example</strong>: 60% of collected responses coming from men in a general population survey​</li>
</ul></li>
<li><strong>Convenience sample</strong>: When the most convenient respondents are disproportionately sampled
<ul>
<li><strong>Example</strong>: You sample your friends &amp; colleagues on social media for a survey​</li>
</ul></li>
<li><strong>Example</strong>: A study of how frequently adolescents discussed alcohol use with their parents &amp; teachers is likely <strong>biased</strong> by the fact those willing to talk to interviewers are also more likely to talk to their parents &amp; teachers (form of self-selection)​
<ul>
<li>Likely to <strong>overestimate</strong> amount of communication on the topic</li>
</ul></li>
</ul>
</section>
<section id="sample-bias-due-to-undercoverage" class="slide level2 smaller">
<h2>Sample Bias Due to Undercoverage</h2>
<ul>
<li>Individuals in <strong>institutions</strong> (nursing homes or prisons) often excluded from surveys​</li>
<li>Conducting a <strong>survey by telephone</strong> will undersample younger individuals who are less likely to own a landline phone​</li>
<li>Conducting a <strong>survey by the internet</strong> will undersample rural &amp; senior individuals​</li>
<li>Conducting a <strong>survey by in-person intercept</strong> will undersample introverts &amp; reclusive authors​</li>
<li>If a household does not answer the door, an interviewer may select a neighbour - less likely to work outside the home?</li>
</ul>
</section>
<section id="non-response-bias" class="slide level2 smaller">
<h2>Non-Response Bias</h2>
<ul>
<li>Even a carefully designed survey will suffer from non-response bias​</li>
<li>Differences between responding &amp; non-responding populations often unknown​</li>
<li>Many public &amp; academic surveys have low response rates (&lt;10%) - How to generalize results when 90% of targeted sample did not respond?</li>
</ul>
<table class="caption-top">
<colgroup>
<col style="width: 65%">
<col style="width: 34%">
</colgroup>
<thead>
<tr class="header">
<th>Type of School District</th>
<th>Participation Rate (%)</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>Urban</td>
<td>100</td>
</tr>
<tr class="even">
<td>Metropolitan suburban</td>
<td>25</td>
</tr>
<tr class="odd">
<td>Nonmetropolitan with more than 2000 students</td>
<td>62</td>
</tr>
<tr class="even">
<td>Nonmetropolitan with 1000-1999 students</td>
<td>27</td>
</tr>
<tr class="odd">
<td>Nonmetropolitan with 500-999 students</td>
<td>61</td>
</tr>
<tr class="even">
<td>Nonmetropolitan with fewer than 500 students</td>
<td>53</td>
</tr>
</tbody>
</table>
</section>
<section id="measurement-error" class="slide level2">
<h2>Measurement Error</h2>
<ul>
<li>Occurs when responses differ from the true (population) value in one direction​</li>
<li>People sometimes do not tell the truth: E.g., income, exercise frequency, &amp; alcohol consumption​</li>
<li>People do not always understand the question: E.g., questions using jargon​</li>
<li>People forget: E.g., recall of all long-distance travel over the past year</li>
</ul>
</section>
<section id="measurement-error-1" class="slide level2">
<h2>Measurement Error</h2>
<ul>
<li>People say what they think the interviewer wants to hear or what they think will impress the interview: E.g., stating they plan to buy an EV​</li>
<li>Certain words mean different things to different people: E.g., “Do you own a car?”​
<ul>
<li>“Does it count if I am making payments?​”</li>
<li>“Is a pickup truck a car?​”</li>
<li>“My parents own a car that I drive. Does that count?””</li>
</ul></li>
</ul>
</section>
<section id="sampling-nonsampling-error" class="slide level2">
<h2>Sampling &amp; Nonsampling Error</h2>
<ul>
<li><strong>Selection bias</strong> &amp; <strong>measurement error</strong> are examples of <strong>nonsampling error</strong></li>
<li><strong>Sampling error</strong> arises from the use of a sample rather than the population</li>
<li><strong>Sampling error</strong> may be negligible compared with <strong>non-sampling error</strong>
<ul>
<li>A survey with a 30% response rate may proudly state a <strong>3% margin of error</strong>, while ignoring a significant selection bias</li>
</ul></li>
</ul>
</section>
<section id="margin-of-error" class="slide level2">
<h2>Margin of Error</h2>

<img data-src="../../../assets/images/teaching/ENCI707/Lecture2/margin_of_error.png" class="quarto-figure quarto-figure-center r-stretch"></section>
<section id="intuition-for-statistical-properties" class="slide level2">
<h2>Intuition for Statistical Properties</h2>

<img data-src="../../../assets/images/teaching/ENCI707/Lecture2/statistical_property_target.png" class="quarto-figure quarto-figure-center r-stretch"></section></section>
<section>
<section id="survey-design" class="title-slide slide level1 center">
<h1>Survey Design</h1>

</section>
<section id="questionaire-design-1" class="slide level2 smaller">
<h2>Questionaire Design 1</h2>
<ol type="1">
<li>Always write down the objective of your survey​</li>
<li>Objectives should be <strong>specific</strong> rather than general​</li>
</ol>
<ul>
<li>Bad: “I want to learn something about auto ownership”​</li>
<li>Good: “What factors do people considering when deciding to own a seven-passenger over a five-passenger vehicle?​</li>
</ul>
<ol start="3" type="1">
<li>Ask <strong>one concept</strong> per question​</li>
</ol>
<ul>
<li>“Do you agree with the <em>Biden administration’s</em> <em>infrastructure spending package</em>?”. Confuses two opinions: the opinion of Joe Biden and the opinion of the infrastructure package. Also, “spending” can have a different connotation than “investment” or “improvement”</li>
</ul>
</section>
<section id="questionaire-design-2" class="slide level2 smaller">
<h2>Questionaire Design 2</h2>
<ol start="4" type="1">
<li>Keep questions <strong>simple</strong> &amp; <strong>clear</strong>​</li>
</ol>
<ul>
<li>One study tested the question “What proportion of your evening viewing time do you spend watching news programs? on 53 people. Only 14 people correctly interpreted the word “proportion” as “percentage”, “part”, or “fraction”. Others interpreted it as “how long do you watch?” or “which news programs do you watch?”​</li>
</ul>
<ol start="5" type="1">
<li>Use <strong>specific questions</strong> instead of <strong>general questions</strong>​</li>
</ol>
<ul>
<li>Bad: “Does it make you nervous taking a ride-hailing (e.g., Uber or Lyft) trip?”​</li>
<li>Better: “I have the following concerns when making a ride-hailing (e.g., Uber or Lyft) trip : (a) It will be slower than driving myself, (b) The driver will not drive safely, (c) I do not want to share a ride with others, (d) I have no concerns, (e) Other. Please specify: ______.”​</li>
</ul>
</section>
<section id="questionaire-design-3" class="slide level2 smaller">
<h2>Questionaire Design 3</h2>
<ol start="6" type="1">
<li>On the other hand, avoid questions that <strong>prompt respondents</strong> to give the answer you want to hear​</li>
</ol>
<ul>
<li>“<em>Most traffic crashes involve private vehicles.</em> Would you take public transit to reduce the number of crashes on the road?”​</li>
</ul>
<ol start="7" type="1">
<li>Avoid <strong>double negatives</strong>​</li>
</ol>
<ul>
<li>“Do you favor or <em>oppose not</em> allowing drivers to use cell phones while driving?” might elicit either response from a person who thinks people should not use cell phones while driving​</li>
</ul>
</section>
<section id="sampling-strategies" class="slide level2 smaller">
<h2>Sampling Strategies</h2>
<ul>
<li><strong>Simple random sampling (SRS)</strong>: Randomly sample n individuals from a population of N</li>
<li><strong>Cluster sampling</strong>: Observation units in the population are aggregated into larger sample units (clusters)
<ul>
<li><strong>Example</strong>: You would like to sample all Tesla owners in the United States but do not have access to a list of all owners. You do have a list of Tesla clubs. You can use SRS among the clubs and then survey all or a subsample of members in each club</li>
</ul></li>
<li><strong>Stratified random sampling</strong>: Population divided into subgroups called strata. SRS is applied within each strata. Strata are often subgroups of interest to the researcher
<ul>
<li><strong>Example</strong>: Regions of the country, sizes of cities, or other variables that are readily available without having to first interview the respondents</li>
<li>Stratified random sampling is common in transportation field</li>
</ul></li>
<li><strong>Systematic sample</strong>: A starting point is chosen from a list of population members using a random number &amp; equally spaced individuals are chosen from the list</li>
</ul>
</section>
<section id="sampling-strategies-1" class="slide level2">
<h2>Sampling Strategies</h2>

<img data-src="../../../assets/images/teaching/ENCI707/Lecture2/sampling_strategy.png" class="quarto-figure quarto-figure-center r-stretch"></section>
<section id="stratified-sampling" class="slide level2 smaller">
<h2>Stratified Sampling</h2>
<ul>
<li>Often have supplementary information prior to conducting survey that is useful to our survey design
<ul>
<li>New York residents pay more for housing than residents of Lincoln</li>
<li>Rural residents shop for groceries less frequently than urban residents</li>
</ul></li>
<li>If there is <strong>high heteroskedicity</strong> (variance takes on different values in different subpopulations) may be able to obtain more precise (i.e., lower variance) population quantities using stratified sampling
<ul>
<li><strong>Example</strong>: In a population of 1,000 male and 1,000 female students, it is theoretically possible for a random sample of 100 students to contain few male (or female) students. Can take a random sample of 50 male and 50 female students to ensure correct distribution</li>
</ul></li>
<li>Sampling design can be varied between strata
<ul>
<li><strong>Example</strong>: In a survey of businesses, an internet survey might be used for large firms while a mail or telephone survey is used for small firms</li>
</ul></li>
</ul>
</section>
<section id="types-of-stratified-sampling" class="slide level2 smaller">
<h2>Types of Stratified Sampling</h2>
<ul>
<li><strong>Proportional allocation</strong>: Number of sampled units in each stratum is proportional to the size of the stratum</li>
<li><strong>Optimal allocation</strong>: useful with heteroskedastic data. Often the case that variance is higher in larger (or higher valued) than smaller (or smaller valued) units.</li>
<li><strong>Example</strong>: A study by the Chesapeake and Ohio (C&amp;O) Railroad Company to determine how much revenue they should get from interline freight shipments, since the total freight from a shipment that traveled along several railroads was divided among the different railroads. The C&amp;O took a stratified sample of waybills - the documents that detailed the goods, route, and charge for the shipments. The waybills were stratified by the total freight charges. All waybills with charges over $40 were sampled, whereas only 1% of those with charges less than $5 were sampled. There was little variation in the amount owed to C&amp;O among the smallest total freight charges, whereas the variability in the stratum with charges of over $40 was much higher.</li>
</ul>
</section>
<section id="common-strata" class="slide level2 smaller">
<h2>Common Strata</h2>
<ul>
<li><strong>Geography</strong>: region, division, state, or county</li>
<li><strong>Sampling unit size</strong>: number of employees, number of establishments, or number of household members</li>
<li><strong>Sampling unit composition</strong>: industry classification, racial composition, or similar variables</li>
<li><strong>Note</strong>: Setting quotas is <strong>NOT</strong> stratified sampling if random sampling is not used to select individuals from each subpopulation. With quotas, we do not know the inclusion probability for a sampling unit.
<ul>
<li><strong>Sampling bias may exist.</strong> Interviewer will likely pick the most convenient units: persons who are easily reachable by telephone, households without menacing dogs, or areas of the forest close to the road (in case of ecological study)</li>
</ul></li>
</ul>
</section>
<section id="sample-size-determination" class="slide level2 smaller">
<h2>Sample Size Determination</h2>
<p><span class="math display">\[n = \frac{z_{\alpha/2}^2 S^2}{e^2+\frac{z_{\alpha/2}^2 S^2}{N}}\]</span> - where - <span class="math inline">\(𝑧\)</span> is a z-statistic - <span class="math inline">\(𝑆^2\)</span> is the sample variance (generally unknown) - <span class="math inline">\(𝑒\)</span> is the desired margin of error - <span class="math inline">\(𝑁\)</span> is the population - If <span class="math inline">\(𝑛_0=\left(\frac{𝑧_{\alpha∕2}^2 𝑆}{e}\right)^2&gt;𝑁\)</span> then simply take a census of <span class="math inline">\(n=N\)</span> or use <span class="math inline">\(𝑛=𝑛_0/(1+𝑛_𝑜/𝑁)\)</span> - For large populations (<span class="math inline">\(n \approx n_0\)</span>), need approximately same sample size regardless of if the population is 10 million or 1 billion - Approximation of 𝑆^2 1. Use sample quantities from pretesting of survey 2. Use previous studies or data available from literature 3. If all else fails… guess the variance based on some hypothesized distribution for the data! If you assume a normal distribution, could approximate variance as feasible range of values divided by 4 (within 2 SD of mean) or 6 (within 3 SD of mean).</p>
</section>
<section id="online-surveys" class="slide level2 smaller">
<h2>Online Surveys</h2>
<ul>
<li>Increasingly common form of survey administration​</li>
<li>Spectrum of convenience sample characteristics:​
<ul>
<li>Interviewing your friends and colleagues on social media (<strong>high bias potential</strong>)​</li>
<li>Using an opt-in internet panel (<strong>medium bias potential</strong>)​</li>
<li>Using an internet panel compiled using a variety of random sampling techniques: email, telephone, and mail-out invitations to a random sample of individuals (<strong>low bias potential</strong>)​</li>
</ul></li>
<li>Effect of <strong>offering incentives and rewards</strong> for completing surveys?</li>
</ul>
</section>
<section id="online-surveys-1" class="slide level2 smaller">
<h2>Online Surveys</h2>
<ul>
<li>As of 2024 ACS, 10% of US households <strong>did not</strong> have access to high-speed internet​</li>
<li>Low response rate (often 10% or less) means significant selection bias risk​</li>
<li>Standard online survey method is quota-based sampling with poststratification weights​</li>
<li>Study in 2011 found sampling-based surveys consistently more accurate than non-probability-sample surveys, even after poststratification weighting of data​</li>
<li>Study that recruited US adults from seven vendors found a 15-25% overlap in the sample pool</li>
</ul>
</section>
<section id="poststratification-weighting" class="slide level2 smaller">
<h2>Poststratification Weighting​</h2>
<ul>
<li>Method to adjust sample so it better matches population​</li>
<li>Standard method is called raking or iterative proportional fitting (IPF)​
<ul>
<li>Like a trip distribution model, we want to match marginal control totals by adjusting a vector of weights until convergence​</li>
</ul></li>
<li>Typical poststratification weighting variables: ​</li>
<li><strong>Person weights</strong>: age, educational attainment, &amp; employment status​</li>
<li><strong>Household weights</strong>: size, income, &amp; geographic location​</li>
<li>General process:​
<ol type="1">
<li>Aggregate observations along a given dimension (e.g., age by 10-year interval)​</li>
<li>Generate ratios of population vs.&nbsp;sample along the given dimension​</li>
<li>Apply ratios across individual weights (initially all 1s)​</li>
<li>Repeat to convergence of weighting ratios</li>
</ol></li>
</ul>
</section></section>
<section>
<section id="stated-preference-experiments" class="title-slide slide level1 center">
<h1>Stated Preference Experiments</h1>

</section>
<section id="need-for-stated-preference-data" class="slide level2 smaller">
<h2>Need for Stated Preference Data</h2>
<ul>
<li>It is rare to <strong>observe</strong> the decision-making process</li>
<li>What if we want to know demand for a good or service that <strong>does not exist yet</strong> (at least not locally)?
<ul>
<li><strong>Example</strong>: Would you use a vertical takeoff and landing (VTOL) vehicle?</li>
</ul></li>
</ul>

<img data-src="../../../assets/images/teaching/ENCI707/Lecture2/vtol.jpg" class="quarto-figure quarto-figure-center r-stretch" style="width:50.0%"></section>
<section id="comparison-of-revealed-preference-rp-stated-preference-sp-observations" class="slide level2">
<h2>Comparison of Revealed Preference (RP) &amp; Stated Preference (SP) Observations</h2>
<div style="font-size: 0.35em;">
<table class="caption-top">
<colgroup>
<col style="width: 11%">
<col style="width: 40%">
<col style="width: 38%">
<col style="width: 9%">
</colgroup>
<thead>
<tr class="header">
<th>Factor</th>
<th>Revealed Preference</th>
<th>Stated Preference</th>
<th>Comment</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>Form of observed choice behaviour</td>
<td>Actual ‘compromise’ choice with real-world constraints</td>
<td>Potentially concerns ‘preferences’ rather than ‘compromise’ choice as hypothetical context can be used to remove real-world constraints</td>
<td>Relates to purpose of survey</td>
</tr>
<tr class="even">
<td>Establishing values for explantory variables</td>
<td>Engineering values expensive to establish; stated values inexpensive but potentially distorted by faulty perceptions and ex-post justification</td>
<td>Presented vlaues inexpensive and unambiguous</td>
<td>Advantage with SP</td>
</tr>
<tr class="odd">
<td>Correlation structure in estimation data</td>
<td>Correlation structure uncontrolled; analyst must accept potentially high correlations among explanatory variables &amp; deal with impacts on correlations in estimation</td>
<td>Correlation structure controllable; analyst can dictate correlations among explanatory variables &amp; avoid high correlations in estimation</td>
<td>Why SP used</td>
</tr>
<tr class="even">
<td>Explanation of causal-behavoural connections</td>
<td>Indirect reliance on correlations between observed behaviour &amp; engineering values</td>
<td>Direct in that respondents are asked to react to indicated attribute values</td>
<td>Not an issue in SP with careful design</td>
</tr>
<tr class="odd">
<td>Flexibility</td>
<td>Limited to real-world contexts</td>
<td>Not limited to real-world contexts but validity increasingly questionable as context becomes less familiar; ability to consider non-existing alternatives</td>
<td>Why SP used</td>
</tr>
<tr class="even">
<td>Transferability</td>
<td>More limited as real-world conditions &amp; context are tightly woven into observed behaviour</td>
<td>Less limited as hypothetical context can be specified to be identical across implementations</td>
<td>Advantage with SP</td>
</tr>
<tr class="odd">
<td>Speed of implementation</td>
<td>Can be slow depending on availability of engineering values for explanatory variables</td>
<td>Relatively fast; opportunity to collect multiple responses from same respondent</td>
<td>Advantage with SP</td>
</tr>
<tr class="even">
<td>Validity</td>
<td>Near certain</td>
<td>Can be questionable; experimental design is key</td>
<td>Why RP used</td>
</tr>
<tr class="odd">
<td>Certainty about respondent comprehension</td>
<td>Certain to extent that respondent made actual choice in real-world situation</td>
<td>Uncertain to extent that respondent does not understand process but can be validated with supplemental questions</td>
<td>Not often an issue</td>
</tr>
</tbody>
</table>
</div>
</section>
<section id="stated-preference-methods" class="slide level2 smaller">
<h2>Stated Preference Methods</h2>
<ul>
<li><strong>Contingent Valuation</strong> - CV
<ul>
<li>Explicit stated willingness-to-pay (WTP) information for policy or product</li>
<li>Cannot be used to disentangle WTP for individual attributes</li>
</ul></li>
<li><strong>Conjoint Analysis</strong>
<ul>
<li>Ranking/rating of alternatives</li>
<li>Can assign WTP to individual attributes</li>
<li>Ranking as dependent variable questionable because not interval scaled</li>
<li>Do respondents rank/rate alternatives in real-world?</li>
</ul></li>
<li><strong>Stated choice (or preference)</strong> - SP
<ul>
<li>Based on random utility theory</li>
<li>Our preferred approach in this class</li>
</ul></li>
</ul>
</section>
<section id="stated-preference-sp-experiment-components" class="slide level2">
<h2>Stated Preference (SP) Experiment Components</h2>
<ul>
<li><strong>Alternatives</strong>: person making choice between alternatives</li>
<li><strong>Attributes</strong>: alternatives are defined by their attributes</li>
<li><strong>Attribute levels</strong>: attributes are described by their levels</li>
</ul>
</section>
<section id="sp-experimental-design-process" class="slide level2">
<h2>SP Experimental Design Process</h2>

<img data-src="../../../assets/images/teaching/ENCI707/Lecture2/experimental_design_process.png" class="quarto-figure quarto-figure-center r-stretch" style="width:50.0%"></section>
<section id="example---mode-choice-in-toronto-experiment" class="slide level2">
<h2>Example - Mode Choice in Toronto (Experiment)</h2>

<img data-src="../../../assets/images/teaching/ENCI707/Lecture2/mode_choice_to.png" class="quarto-figure quarto-figure-center r-stretch" style="width:50.0%"></section>
<section id="example---mode-choice-in-toronto-attributes" class="slide level2">
<h2>Example - Mode Choice in Toronto (Attributes)</h2>
<div class="columns">
<div class="column" style="width:50%;">
<div class="quarto-figure quarto-figure-center">
<figure>
<p><img data-src="../../../assets/images/teaching/ENCI707/Lecture2/mode_choice_to_levels1.png" class="quarto-figure quarto-figure-center"></p>
</figure>
</div>
</div><div class="column" style="width:50%;">
<div class="quarto-figure quarto-figure-center">
<figure>
<p><img data-src="../../../assets/images/teaching/ENCI707/Lecture2/mode_choice_to_levels2.png" class="quarto-figure quarto-figure-center"></p>
</figure>
</div>
</div></div>
</section>
<section id="sp-considerations-1" class="slide level2">
<h2>SP Considerations 1</h2>
<ul>
<li>Will the experiment be <strong>labelled</strong> (i.e., alternative names have meaning beyond their ordering) or <strong>unlabelled</strong>?</li>
<li>Will a <strong>non-purchase or status quo</strong> alternative be presented?</li>
<li>Will the outputs be used as inputs to another model – e.g., a network model does not allow for a comfort attribute so may not want to include it in experiment</li>
</ul>
</section>
<section id="sp-considerations-2" class="slide level2">
<h2>SP Considerations 2</h2>
<ul>
<li>Should not omit realistic alternatives a respondent might consider in practice – e.g., driver response to a new road pricing initiative
<ul>
<li>May consider alternative modes, but more likely you will change departure time or destination choice to avoid more expensive road tolls on that day</li>
</ul></li>
<li>Do not want to place respondent in an unnecessarily unrealistic scenario</li>
<li>Always do internal and external pilots!</li>
</ul>
</section>
<section id="sp-experimental-design-1" class="slide level2 smaller">
<h2>SP Experimental Design 1</h2>
<ul>
<li><strong>Attribute level balance</strong>: Each attribute level appears an equal number of times over design</li>
<li>Desirable property although it may impact on <strong>statistical efficiency</strong></li>
</ul>
<p><strong>Example:</strong> Consider a design with four attributes, where two have two levels, one has three levels and the last has four levels. In the classical jargon in this field we would refer to this as a 22 31 41 factorial design; note that the product of levels to the power of attributes (48 in this case) represents the total number of choice tasks needed to recover all effects (i.e.&nbsp;main or linear effects and all interactions), i.e.&nbsp;a full factorial design (more about this below).Assuming each attribute will produce a unique parameter estimate (i.e.&nbsp;main effects only), the smallest design would require just four choice tasks based on the number of parameters criterion; however, to maintain attribute level balance, the smallest possible design would require 12 choice tasks (12 being divisible without remainder by 2, 3, and 4).</p>
</section>
<section id="sp-experimental-design-2" class="slide level2 smaller">
<h2>SP Experimental Design 2</h2>
<ul>
<li><strong>Number of attribute levels</strong>: More levels requires more choice tasks due to additional parameters</li>
<li><strong>Varying range</strong>: Use a wide range (e.g., $0-$30) is statistically preferable over a narrow range (e.g., $0-$10) because theoretically leads to smaller standard errors</li>
<li>Wide range may also be problematic though due to <strong>dominated alternatives</strong></li>
<li>Narrow range may result in alternatives for which respondents cannot distinguish differences</li>
</ul>
</section>
<section id="sp-experimental-design-3" class="slide level2">
<h2>SP Experimental Design 3</h2>
<ul>
<li>Which option would you pick?</li>
</ul>
<table class="caption-top">
<thead>
<tr class="header">
<th style="text-align: center;">Attribute</th>
<th style="text-align: center;">Bus</th>
<th style="text-align: center;">Car</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: center;">Travel time</td>
<td style="text-align: center;">11</td>
<td style="text-align: center;">10</td>
</tr>
<tr class="even">
<td style="text-align: center;">Travel cost</td>
<td style="text-align: center;">2.75</td>
<td style="text-align: center;">3</td>
</tr>
</tbody>
</table>
<ul>
<li>Why would someone pick bus in this case?</li>
</ul>
<table class="caption-top">
<thead>
<tr class="header">
<th style="text-align: center;">Attribute</th>
<th style="text-align: center;">Bus</th>
<th style="text-align: center;">Car</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: center;">Travel time</td>
<td style="text-align: center;">31</td>
<td style="text-align: center;">10</td>
</tr>
<tr class="even">
<td style="text-align: center;">Travel cost</td>
<td style="text-align: center;">2.75</td>
<td style="text-align: center;">3</td>
</tr>
</tbody>
</table>
</section>
<section id="sp-experimental-design-4" class="slide level2">
<h2>SP Experimental Design 4</h2>
<ul>
<li><strong>Recommendation</strong>: Use the worst case utility specification to design the experiment</li>
<li>Can always estimate simpler models but choosing a design with too few choice tasks may preclude estimating valid model specifications at a later state</li>
</ul>
</section>
<section id="experiment-design-processes-1" class="slide level2">
<h2>Experiment Design Processes 1</h2>
<ul>
<li><strong>Full factorial (FF) design</strong>: consider all possible attribute combinations</li>
<li><strong>Fractional factorial design</strong>:
<ul>
<li>Randomly select from (FF) design</li>
<li><strong>Orthogonal design</strong>: zero correlation between attributes (great for linear models)</li>
</ul></li>
<li><strong>Efficient design</strong>: Reduce parameter variance and covariance (D-efficient)</li>
</ul>
</section>
<section id="experiment-design-processes-2" class="slide level2 smaller">
<h2>Experiment Design Processes 2</h2>
<ul>
<li>Two competing schools of thought on how to define the covariance matrix (<span class="math inline">\(S^2\)</span> calculated as negative inverse of <strong>Fisher information/Hessian matrix</strong>)
<ul>
<li><strong>Null hypothesis school</strong>: Zero-valued parameter priors. Assumes designs are orthogonal within alternatives and maximize differences in attribute levels between alternatives
<ul>
<li>Can only be developed assuming a multinomial logit (MNL) model</li>
</ul></li>
<li><strong>Non-null hypothesis school</strong>: Non-zero-valued parameter priors</li>
</ul></li>
<li><strong>Bayesian (B)-efficient design</strong>:
<ul>
<li>Allow for a range of parameter priors (e.g., <span class="math inline">\(\theta~N(-0.8,2)\)</span>)</li>
<li>Not limited to orthogonal coding</li>
<li>Directly related to expected outcome of modeling process</li>
<li>Can assume any model structure, not just MNL</li>
</ul></li>
</ul>
</section>
<section id="experiment-design-processes-3" class="slide level2">
<h2>Experiment Design Processes 3</h2>
<ul>
<li><strong>D-efficient</strong> named for use of scaled (by 1/K to account for number of parameters) matrix determinant</li>
<li><strong>S-efficient</strong> named for use of sample size provide theoretically minimum sample size to obtain asymptotically significant parameter estimates</li>
</ul>
</section>
<section id="experiment-design-processes-4" class="slide level2 smaller">
<h2>Experiment Design Processes 4</h2>
<ul>
<li><strong>Fisher information matrix</strong> for N respondents given by <span class="math inline">\(\mathbf{𝑰}_𝑁(\theta)\)</span> <span class="math display">\[\mathbf{𝑰}_𝑁 (\theta)=N\mathbf{𝑰}_1 (\theta)\]</span> Then <span class="math display">\[\mathbf{𝑺}_𝑁^2=(\mathbf{𝑰}_𝑛 (𝜃))^{−1}=1/𝑁 \mathbf{𝑺}_1^2\]</span> And <span class="math display">\[𝑠𝑒_𝑁 (\theta)=\frac{𝑠𝑒_1 (\theta)}{\sqrt{N}}\]</span></li>
<li>Standard errors exhibit diminishing marginal returns for increasing sample size</li>
</ul>
</section>
<section id="design-blocking" class="slide level2 smaller">
<h2>Design Blocking</h2>
<ul>
<li>Often the number of choice tasks generated by a design is too large for a single respondent to handle</li>
<li><strong>Blocking</strong> is a method to group choice tasks
<ul>
<li>Uses modular algebra to decide one effect that will be confounded</li>
<li>For orthogonal designs, need to define an additional blocking column to allocate subsets of generated tasks to respondents</li>
<li>Use of orthogonal design avoids one respondent seeing only high price alternatives and another only low price alternatives</li>
</ul></li>
</ul>
</section>
<section id="non-purchase-option-npo" class="slide level2 smaller">
<h2>Non-Purchase Option (NPO)</h2>
<ul>
<li>Not commonly applied in transportation literature</li>
<li>Risk with exclusion is that respondent will be forced to pick a <strong>non-preferred option</strong></li>
<li>Olsen and Swait (1998) find
<ul>
<li>If NPO is not present, attribute weights will differ from those observed when NPO is offered in design</li>
<li>If NPO is included in design, analyst should be able to identify more non-linear preference structures</li>
<li>Models based on data with no NPO may show low predictive capacity for choice situations including an NPO, whereas those with an NPO will show good predictive capacity in any situation</li>
</ul></li>
</ul>
</section>
<section id="challenge-of-interattribute-correlation" class="slide level2 smaller">
<h2>Challenge of Interattribute Correlation</h2>
<ul>
<li>Despite the use of the word <strong>correlation</strong>, not a statistical concept</li>
<li>Refers to <strong>cognitive perception</strong> that respondents associated to attributes we include in experiments</li>
<li><strong>Price</strong> &amp; <strong>quality</strong> often associated with each other by respondents</li>
<li>How will a person respond to a high price and low quality alternative?
<ul>
<li>Respondent may stop taking survey experiment seriously, biasing the results</li>
</ul></li>
</ul>
</section>
<section id="sp-pivoted-off-rp" class="slide level2 smaller">
<h2>SP-Pivoted-Off-RP</h2>
<ul>
<li>One method for overcoming unrealistic choice experiments</li>
<li>Ask the respondent a series of RP questions, then base (<strong>pivot</strong>) the SP experiment off their response</li>
<li><strong>Example</strong>: What are your home and work locations?
<ul>
<li>Use <strong>Google Directions API</strong> to obtain typical driving, transit, cycling, and walking times for the given OD pair</li>
<li>Specify SP travel times that are within ±15% of the Google values by mode</li>
<li>Similarly, calculate travel costs based on supplemental per mile values</li>
</ul></li>
</ul>
</section>
<section id="other-design-recommendations-1" class="slide level2 smaller">
<h2>Other Design Recommendations 1</h2>
<ul>
<li>Focus on specific rather than general behaviour - e.g., respondents should be asked how they would respond to an alternative on a given occasion, rather than in general</li>
<li>Use realistic choice context - e.g., recent personal experience of (pivot design)
<ul>
<li>Retaining the constraints on choice required to make the context realistic - e.g., ‘if today you would prefer to use the car to visit your dentist in the evening directly from work, then retain this restriction in your choices’</li>
</ul></li>
<li>Use existing (perceived) levels of attributes so that the options are built around existing experience</li>
</ul>
</section>
<section id="other-design-recommendations-2" class="slide level2 smaller">
<h2>Other Design Recommendations 2</h2>
<ul>
<li>Keep choice experiments simple - we respond to very complex choices in practice but do so over a long period of time</li>
<li>Allow respondents to opt for response outside set of experimental alternatives - e.g., in mode choice exercise, if all options become too unattractive respondent may decide to change destination, time of travel, or not to travel at all</li>
<li>Allow ‘will do something else’ alternative - could be programmed to branch to another exercise exploring precisely these other options</li>
<li>Make sure alternatives are clearly and unambiguously defined (difficult when dealing with qualitative attributes like security or comfort)
<ul>
<li>E.g., do not express alternatives as ‘poor’ or ‘improved’, which are vague and prone to different interpretations by respondents - what measures or facilities, etc.).</li>
</ul></li>
</ul>


</section></section>
    </div>
  <div class="quarto-auto-generated-content" style="display: none;">
<p><img src="../../../assets/images/teaching/ENCI707/logo.png" class="slide-logo"></p>
<div class="footer footer-default">
<p><a href="../../..\teaching/ENCI707/">ENCI707 Home</a></p>
</div>
</div></div>

  <script>window.backupDefine = window.define; window.define = undefined;</script>
  <script src="../../../site_libs/revealjs/dist/reveal.js"></script>
  <!-- reveal.js plugins -->
  <script src="../../../site_libs/revealjs/plugin/quarto-line-highlight/line-highlight.js"></script>
  <script src="../../../site_libs/revealjs/plugin/pdf-export/pdfexport.js"></script>
  <script src="../../../site_libs/revealjs/plugin/reveal-menu/menu.js"></script>
  <script src="../../../site_libs/revealjs/plugin/reveal-menu/quarto-menu.js"></script>
  <script src="../../../site_libs/revealjs/plugin/reveal-chalkboard/plugin.js"></script>
  <script src="../../../site_libs/revealjs/plugin/quarto-support/support.js"></script>
  

  <script src="../../../site_libs/revealjs/plugin/notes/notes.js"></script>
  <script src="../../../site_libs/revealjs/plugin/search/search.js"></script>
  <script src="../../../site_libs/revealjs/plugin/zoom/zoom.js"></script>
  <script src="../../../site_libs/revealjs/plugin/math/math.js"></script>
  <script>window.define = window.backupDefine; window.backupDefine = undefined;</script>

  <script>

      // Full list of configuration options available at:
      // https://revealjs.com/config/
      Reveal.initialize({
'controlsAuto': true,
'previewLinksAuto': false,
'pdfSeparateFragments': false,
'autoAnimateEasing': "ease",
'autoAnimateDuration': 1,
'autoAnimateUnmatched': true,
'jumpToSlide': true,
'menu': {"side":"left","useTextContentForMissingTitles":true,"markers":false,"loadIcons":false,"custom":[{"title":"Tools","icon":"<i class=\"fas fa-gear\"></i>","content":"<ul class=\"slide-menu-items\">\n<li class=\"slide-tool-item active\" data-item=\"0\"><a href=\"#\" onclick=\"RevealMenuToolHandlers.fullscreen(event)\"><kbd>f</kbd> Fullscreen</a></li>\n<li class=\"slide-tool-item\" data-item=\"1\"><a href=\"#\" onclick=\"RevealMenuToolHandlers.speakerMode(event)\"><kbd>s</kbd> Speaker View</a></li>\n<li class=\"slide-tool-item\" data-item=\"2\"><a href=\"#\" onclick=\"RevealMenuToolHandlers.overview(event)\"><kbd>o</kbd> Slide Overview</a></li>\n<li class=\"slide-tool-item\" data-item=\"3\"><a href=\"#\" onclick=\"RevealMenuToolHandlers.togglePdfExport(event)\"><kbd>e</kbd> PDF Export Mode</a></li>\n<li class=\"slide-tool-item\" data-item=\"4\"><a href=\"#\" onclick=\"RevealMenuToolHandlers.toggleScrollView(event)\"><kbd>r</kbd> Scroll View Mode</a></li>\n<li class=\"slide-tool-item\" data-item=\"5\"><a href=\"#\" onclick=\"RevealMenuToolHandlers.toggleChalkboard(event)\"><kbd>b</kbd> Toggle Chalkboard</a></li>\n<li class=\"slide-tool-item\" data-item=\"6\"><a href=\"#\" onclick=\"RevealMenuToolHandlers.toggleNotesCanvas(event)\"><kbd>c</kbd> Toggle Notes Canvas</a></li>\n<li class=\"slide-tool-item\" data-item=\"7\"><a href=\"#\" onclick=\"RevealMenuToolHandlers.downloadDrawings(event)\"><kbd>d</kbd> Download Drawings</a></li>\n<li class=\"slide-tool-item\" data-item=\"8\"><a href=\"#\" onclick=\"RevealMenuToolHandlers.keyboardHelp(event)\"><kbd>?</kbd> Keyboard Help</a></li>\n</ul>"}],"openButton":true},
'chalkboard': {"buttons":true},
'smaller': false,
 
        // Display controls in the bottom right corner
        controls: false,

        // Help the user learn the controls by providing hints, for example by
        // bouncing the down arrow when they first encounter a vertical slide
        controlsTutorial: false,

        // Determines where controls appear, "edges" or "bottom-right"
        controlsLayout: 'edges',

        // Visibility rule for backwards navigation arrows; "faded", "hidden"
        // or "visible"
        controlsBackArrows: 'faded',

        // Display a presentation progress bar
        progress: true,

        // Display the page number of the current slide
        slideNumber: 'c/t',

        // 'all', 'print', or 'speaker'
        showSlideNumber: 'all',

        // Add the current slide number to the URL hash so that reloading the
        // page/copying the URL will return you to the same slide
        hash: true,

        // Start with 1 for the hash rather than 0
        hashOneBasedIndex: false,

        // Flags if we should monitor the hash and change slides accordingly
        respondToHashChanges: true,

        // Push each slide change to the browser history
        history: true,

        // Enable keyboard shortcuts for navigation
        keyboard: true,

        // Enable the slide overview mode
        overview: true,

        // Disables the default reveal.js slide layout (scaling and centering)
        // so that you can use custom CSS layout
        disableLayout: false,

        // Vertical centering of slides
        center: false,

        // Enables touch navigation on devices with touch input
        touch: true,

        // Loop the presentation
        loop: false,

        // Change the presentation direction to be RTL
        rtl: false,

        // see https://revealjs.com/vertical-slides/#navigation-mode
        navigationMode: 'linear',

        // Randomizes the order of slides each time the presentation loads
        shuffle: false,

        // Turns fragments on and off globally
        fragments: true,

        // Flags whether to include the current fragment in the URL,
        // so that reloading brings you to the same fragment position
        fragmentInURL: false,

        // Flags if the presentation is running in an embedded mode,
        // i.e. contained within a limited portion of the screen
        embedded: false,

        // Flags if we should show a help overlay when the questionmark
        // key is pressed
        help: true,

        // Flags if it should be possible to pause the presentation (blackout)
        pause: true,

        // Flags if speaker notes should be visible to all viewers
        showNotes: false,

        // Global override for autoplaying embedded media (null/true/false)
        autoPlayMedia: null,

        // Global override for preloading lazy-loaded iframes (null/true/false)
        preloadIframes: null,

        // Number of milliseconds between automatically proceeding to the
        // next slide, disabled when set to 0, this value can be overwritten
        // by using a data-autoslide attribute on your slides
        autoSlide: 0,

        // Stop auto-sliding after user input
        autoSlideStoppable: true,

        // Use this method for navigation when auto-sliding
        autoSlideMethod: null,

        // Specify the average time in seconds that you think you will spend
        // presenting each slide. This is used to show a pacing timer in the
        // speaker view
        defaultTiming: null,

        // Enable slide navigation via mouse wheel
        mouseWheel: false,

        // The display mode that will be used to show slides
        display: 'block',

        // Hide cursor if inactive
        hideInactiveCursor: true,

        // Time before the cursor is hidden (in ms)
        hideCursorTime: 5000,

        // Opens links in an iframe preview overlay
        previewLinks: false,

        // Transition style (none/fade/slide/convex/concave/zoom)
        transition: 'fade',

        // Transition speed (default/fast/slow)
        transitionSpeed: 'default',

        // Transition style for full page slide backgrounds
        // (none/fade/slide/convex/concave/zoom)
        backgroundTransition: 'none',

        // Number of slides away from the current that are visible
        viewDistance: 3,

        // Number of slides away from the current that are visible on mobile
        // devices. It is advisable to set this to a lower number than
        // viewDistance in order to save resources.
        mobileViewDistance: 2,

        // The "normal" size of the presentation, aspect ratio will be preserved
        // when the presentation is scaled to fit different resolutions. Can be
        // specified using percentage units.
        width: 1050,

        height: 700,

        // Factor of the display size that should remain empty around the content
        margin: 0.1,

        math: {
          mathjax: 'https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.9/MathJax.js',
          config: 'TeX-AMS_HTML-full',
          tex2jax: {
            inlineMath: [['\\(','\\)']],
            displayMath: [['\\[','\\]']],
            balanceBraces: true,
            processEscapes: false,
            processRefs: true,
            processEnvironments: true,
            preview: 'TeX',
            skipTags: ['script','noscript','style','textarea','pre','code'],
            ignoreClass: 'tex2jax_ignore',
            processClass: 'tex2jax_process'
          },
        },

        // reveal.js plugins
        plugins: [QuartoLineHighlight, PdfExport, RevealMenu, RevealChalkboard, QuartoSupport,

          RevealMath,
          RevealNotes,
          RevealSearch,
          RevealZoom
        ]
      });
    </script>
    <script id="quarto-html-after-body" type="application/javascript">
    window.document.addEventListener("DOMContentLoaded", function (event) {
      const toggleBodyColorMode = (bsSheetEl) => {
        const mode = bsSheetEl.getAttribute("data-mode");
        const bodyEl = window.document.querySelector("body");
        if (mode === "dark") {
          bodyEl.classList.add("quarto-dark");
          bodyEl.classList.remove("quarto-light");
        } else {
          bodyEl.classList.add("quarto-light");
          bodyEl.classList.remove("quarto-dark");
        }
      }
      const toggleBodyColorPrimary = () => {
        const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
        if (bsSheetEl) {
          toggleBodyColorMode(bsSheetEl);
        }
      }
      toggleBodyColorPrimary();  
      const tabsets =  window.document.querySelectorAll(".panel-tabset-tabby")
      tabsets.forEach(function(tabset) {
        const tabby = new Tabby('#' + tabset.id);
      });
      const isCodeAnnotation = (el) => {
        for (const clz of el.classList) {
          if (clz.startsWith('code-annotation-')) {                     
            return true;
          }
        }
        return false;
      }
      const onCopySuccess = function(e) {
        // button target
        const button = e.trigger;
        // don't keep focus
        button.blur();
        // flash "checked"
        button.classList.add('code-copy-button-checked');
        var currentTitle = button.getAttribute("title");
        button.setAttribute("title", "Copied!");
        let tooltip;
        if (window.bootstrap) {
          button.setAttribute("data-bs-toggle", "tooltip");
          button.setAttribute("data-bs-placement", "left");
          button.setAttribute("data-bs-title", "Copied!");
          tooltip = new bootstrap.Tooltip(button, 
            { trigger: "manual", 
              customClass: "code-copy-button-tooltip",
              offset: [0, -8]});
          tooltip.show();    
        }
        setTimeout(function() {
          if (tooltip) {
            tooltip.hide();
            button.removeAttribute("data-bs-title");
            button.removeAttribute("data-bs-toggle");
            button.removeAttribute("data-bs-placement");
          }
          button.setAttribute("title", currentTitle);
          button.classList.remove('code-copy-button-checked');
        }, 1000);
        // clear code selection
        e.clearSelection();
      }
      const getTextToCopy = function(trigger) {
          const codeEl = trigger.previousElementSibling.cloneNode(true);
          for (const childEl of codeEl.children) {
            if (isCodeAnnotation(childEl)) {
              childEl.remove();
            }
          }
          return codeEl.innerText;
      }
      const clipboard = new window.ClipboardJS('.code-copy-button:not([data-in-quarto-modal])', {
        text: getTextToCopy
      });
      clipboard.on('success', onCopySuccess);
      if (window.document.getElementById('quarto-embedded-source-code-modal')) {
        const clipboardModal = new window.ClipboardJS('.code-copy-button[data-in-quarto-modal]', {
          text: getTextToCopy,
          container: window.document.getElementById('quarto-embedded-source-code-modal')
        });
        clipboardModal.on('success', onCopySuccess);
      }
        var localhostRegex = new RegExp(/^(?:http|https):\/\/localhost\:?[0-9]*\//);
        var mailtoRegex = new RegExp(/^mailto:/);
          var filterRegex = new RegExp("https:\/\/Hawkins-TECH-Lab\.github\.io\/hawkins-tech-lab\.github\.io\/");
        var isInternal = (href) => {
            return filterRegex.test(href) || localhostRegex.test(href) || mailtoRegex.test(href);
        }
        // Inspect non-navigation links and adorn them if external
     	var links = window.document.querySelectorAll('a[href]:not(.nav-link):not(.navbar-brand):not(.toc-action):not(.sidebar-link):not(.sidebar-item-toggle):not(.pagination-link):not(.no-external):not([aria-hidden]):not(.dropdown-item):not(.quarto-navigation-tool):not(.about-link)');
        for (var i=0; i<links.length; i++) {
          const link = links[i];
          if (!isInternal(link.href)) {
            // undo the damage that might have been done by quarto-nav.js in the case of
            // links that we want to consider external
            if (link.dataset.originalHref !== undefined) {
              link.href = link.dataset.originalHref;
            }
          }
        }
      function tippyHover(el, contentFn, onTriggerFn, onUntriggerFn) {
        const config = {
          allowHTML: true,
          maxWidth: 500,
          delay: 100,
          arrow: false,
          appendTo: function(el) {
              return el.closest('section.slide') || el.parentElement;
          },
          interactive: true,
          interactiveBorder: 10,
          theme: 'light-border',
          placement: 'bottom-start',
        };
        if (contentFn) {
          config.content = contentFn;
        }
        if (onTriggerFn) {
          config.onTrigger = onTriggerFn;
        }
        if (onUntriggerFn) {
          config.onUntrigger = onUntriggerFn;
        }
          config['offset'] = [0,0];
          config['maxWidth'] = 700;
        window.tippy(el, config); 
      }
      const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
      for (var i=0; i<noterefs.length; i++) {
        const ref = noterefs[i];
        tippyHover(ref, function() {
          // use id or data attribute instead here
          let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
          try { href = new URL(href).hash; } catch {}
          const id = href.replace(/^#\/?/, "");
          const note = window.document.getElementById(id);
          if (note) {
            return note.innerHTML;
          } else {
            return "";
          }
        });
      }
      const findCites = (el) => {
        const parentEl = el.parentElement;
        if (parentEl) {
          const cites = parentEl.dataset.cites;
          if (cites) {
            return {
              el,
              cites: cites.split(' ')
            };
          } else {
            return findCites(el.parentElement)
          }
        } else {
          return undefined;
        }
      };
      var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
      for (var i=0; i<bibliorefs.length; i++) {
        const ref = bibliorefs[i];
        const citeInfo = findCites(ref);
        if (citeInfo) {
          tippyHover(citeInfo.el, function() {
            var popup = window.document.createElement('div');
            citeInfo.cites.forEach(function(cite) {
              var citeDiv = window.document.createElement('div');
              citeDiv.classList.add('hanging-indent');
              citeDiv.classList.add('csl-entry');
              var biblioDiv = window.document.getElementById('ref-' + cite);
              if (biblioDiv) {
                citeDiv.innerHTML = biblioDiv.innerHTML;
              }
              popup.appendChild(citeDiv);
            });
            return popup.innerHTML;
          });
        }
      }
    });
    </script>
    

</body></html>